ARM GAS  /tmp/ccOL19yU.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.syntax unified
  15              		.file	"stm32f1xx_nucleo.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.SPIx_MspInit,"ax",%progbits
  20              		.align	2
  21              		.thumb
  22              		.thumb_func
  24              	SPIx_MspInit:
  25              	.LFB73:
  26              		.file 1 "./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c"
   1:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
   2:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   ******************************************************************************
   3:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @file    stm32f1xx_nucleo.c
   4:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @author  MCD Application Team
   5:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @version V1.0.4
   6:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @date    14-April-2017
   7:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief   This file provides set of firmware functions to manage:
   8:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *          - LEDs and push-button available on STM32F1XX-Nucleo Kit 
   9:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *            from STMicroelectronics
  10:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *          - LCD, joystick and microSD available on Adafruit 1.8" TFT LCD 
  11:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *            shield (reference ID 802)
  12:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   ******************************************************************************
  13:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @attention
  14:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *
  15:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
  16:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *
  17:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * Redistribution and use in source and binary forms, with or without modification,
  18:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * are permitted provided that the following conditions are met:
  19:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   1. Redistributions of source code must retain the above copyright notice,
  20:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *      this list of conditions and the following disclaimer.
  21:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   2. Redistributions in binary form must reproduce the above copyright notice,
  22:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *      this list of conditions and the following disclaimer in the documentation
  23:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *      and/or other materials provided with the distribution.
  24:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   3. Neither the name of STMicroelectronics nor the names of its contributors
  25:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *      may be used to endorse or promote products derived from this software
  26:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *      without specific prior written permission.
  27:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *
  28:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  29:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  30:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
  31:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
  32:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
ARM GAS  /tmp/ccOL19yU.s 			page 2


  33:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  34:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
  35:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
  36:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
  37:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  38:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *
  39:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   ******************************************************************************
  40:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
  41:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  42:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /* Includes ------------------------------------------------------------------*/
  43:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #include "stm32f1xx_nucleo.h"
  44:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  45:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /** @addtogroup BSP
  46:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @{
  47:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
  48:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  49:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /** @defgroup STM32F1XX_NUCLEO STM32F103RB Nucleo
  50:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief This file provides set of firmware functions to manage Leds and push-button
  51:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *        available on STM32F1XX-Nucleo Kit from STMicroelectronics.
  52:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *        It provides also LCD, joystick and uSD functions to communicate with 
  53:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *        Adafruit 1.8" TFT LCD shield (reference ID 802)
  54:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @{
  55:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
  56:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  57:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  58:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /** @defgroup STM32F1XX_NUCLEO_Private_Defines STM32F1XX NUCLEO Private Defines
  59:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @{
  60:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
  61:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
  62:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
  63:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** * @brief STM32F103RB NUCLEO BSP Driver version
  64:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** */
  65:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #define __STM32F1XX_NUCLEO_BSP_VERSION_MAIN   (0x01) /*!< [31:24] main version */
  66:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #define __STM32F1XX_NUCLEO_BSP_VERSION_SUB1   (0x00) /*!< [23:16] sub1 version */
  67:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #define __STM32F1XX_NUCLEO_BSP_VERSION_SUB2   (0x04) /*!< [15:8]  sub2 version */
  68:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #define __STM32F1XX_NUCLEO_BSP_VERSION_RC     (0x00) /*!< [7:0]  release candidate */ 
  69:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #define __STM32F1XX_NUCLEO_BSP_VERSION       ((__STM32F1XX_NUCLEO_BSP_VERSION_MAIN << 24)\
  70:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****                                              |(__STM32F1XX_NUCLEO_BSP_VERSION_SUB1 << 16)\
  71:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****                                              |(__STM32F1XX_NUCLEO_BSP_VERSION_SUB2 << 8 )\
  72:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****                                              |(__STM32F1XX_NUCLEO_BSP_VERSION_RC))
  73:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  74:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
  75:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief LINK SD Card
  76:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
  77:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #define SD_DUMMY_BYTE            0xFF    
  78:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #define SD_NO_RESPONSE_EXPECTED  0x80
  79:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****    
  80:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
  81:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @}
  82:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
  83:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  84:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  85:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /** @defgroup STM32F1XX_NUCLEO_Private_Variables STM32F1XX NUCLEO Private Variables
  86:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @{
  87:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
  88:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** GPIO_TypeDef* LED_PORT[LEDn] = {LED2_GPIO_PORT};
  89:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
ARM GAS  /tmp/ccOL19yU.s 			page 3


  90:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** const uint16_t LED_PIN[LEDn] = {LED2_PIN};
  91:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  92:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** GPIO_TypeDef* BUTTON_PORT[BUTTONn]  = {USER_BUTTON_GPIO_PORT}; 
  93:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** const uint16_t BUTTON_PIN[BUTTONn]  = {USER_BUTTON_PIN}; 
  94:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** const uint8_t  BUTTON_IRQn[BUTTONn] = {USER_BUTTON_EXTI_IRQn };
  95:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
  96:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
  97:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****  * @brief BUS variables
  98:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****  */
  99:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 100:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #ifdef HAL_SPI_MODULE_ENABLED
 101:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** uint32_t SpixTimeout = NUCLEO_SPIx_TIMEOUT_MAX;        /*<! Value of Timeout when SPI communication
 102:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static SPI_HandleTypeDef hnucleo_Spi;
 103:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #endif /* HAL_SPI_MODULE_ENABLED */
 104:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 105:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #ifdef HAL_ADC_MODULE_ENABLED
 106:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static ADC_HandleTypeDef hnucleo_Adc;
 107:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /* ADC channel configuration structure declaration */
 108:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static ADC_ChannelConfTypeDef sConfig;
 109:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #endif /* HAL_ADC_MODULE_ENABLED */
 110:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 111:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 112:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @}
 113:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
 114:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 115:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /** @defgroup STM32F1XX_NUCLEO_Private_Functions STM32F1XX NUCLEO Private Functions
 116:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @{
 117:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
 118:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #ifdef HAL_SPI_MODULE_ENABLED
 119:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void               SPIx_Init(void);
 120:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void               SPIx_Write(uint8_t Value);
 121:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void               SPIx_WriteData(uint8_t *DataIn, uint16_t DataLength);
 122:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void               SPIx_WriteReadData(const uint8_t *DataIn, uint8_t *DataOut, uint16_t Data
 123:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void               SPIx_Error (void);
 124:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void               SPIx_MspInit(void);
 125:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 126:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /* SD IO functions */
 127:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      SD_IO_Init(void);
 128:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      SD_IO_CSState(uint8_t state);
 129:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      SD_IO_WriteReadData(const uint8_t *DataIn, uint8_t *DataOut, uint16_t Dat
 130:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      SD_IO_ReadData(uint8_t *DataOut, uint16_t DataLength);
 131:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      SD_IO_WriteData(const uint8_t *Data, uint16_t DataLength);
 132:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** uint8_t                   SD_IO_WriteByte(uint8_t Data);
 133:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** uint8_t                   SD_IO_ReadByte(void);
 134:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 135:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /* LCD IO functions */
 136:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      LCD_IO_Init(void);
 137:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      LCD_IO_WriteData(uint8_t Data);
 138:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      LCD_IO_WriteMultipleData(uint8_t *pData, uint32_t Size);
 139:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      LCD_IO_WriteReg(uint8_t LCDReg);
 140:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void                      LCD_Delay(uint32_t delay);
 141:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #endif /* HAL_SPI_MODULE_ENABLED */
 142:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 143:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #ifdef HAL_ADC_MODULE_ENABLED
 144:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static HAL_StatusTypeDef  ADCx_Init(void);
 145:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void               ADCx_DeInit(void);
 146:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void               ADCx_MspInit(ADC_HandleTypeDef *hadc);
ARM GAS  /tmp/ccOL19yU.s 			page 4


 147:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void               ADCx_MspDeInit(ADC_HandleTypeDef *hadc);
 148:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #endif /* HAL_ADC_MODULE_ENABLED */
 149:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 150:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @}
 151:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
 152:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 153:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /** @defgroup STM32F1XX_NUCLEO_Exported_Functions STM32F1XX NUCLEO Exported Functions
 154:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @{
 155:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
 156:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 157:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 158:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  This method returns the STM32F1XX NUCLEO BSP Driver revision
 159:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @retval version : 0xXYZR (8bits for each decimal, R for RC)
 160:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 161:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** uint32_t BSP_GetVersion(void)
 162:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 163:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   return __STM32F1XX_NUCLEO_BSP_VERSION;
 164:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 165:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 166:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /** @defgroup STM32F1XX_NUCLEO_LED_Functions STM32F1XX NUCLEO LED Functions
 167:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @{
 168:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
 169:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 170:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 171:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Configures LED GPIO.
 172:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Led: Led to be configured. 
 173:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *          This parameter can be one of the following values:
 174:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *     @arg LED2
 175:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 176:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void BSP_LED_Init(Led_TypeDef Led)
 177:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 178:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpioinitstruct;
 179:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 180:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Enable the GPIO_LED Clock */
 181:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LEDx_GPIO_CLK_ENABLE(Led);
 182:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 183:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Configure the GPIO_LED pin */
 184:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin    = LED_PIN[Led];
 185:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode   = GPIO_MODE_OUTPUT_PP;
 186:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pull   = GPIO_NOPULL;
 187:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed  = GPIO_SPEED_FREQ_HIGH;
 188:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 189:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(LED_PORT[Led], &gpioinitstruct);
 190:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 191:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Reset PIN to switch off the LED */
 192:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_WritePin(LED_PORT[Led],LED_PIN[Led], GPIO_PIN_RESET);
 193:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 194:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 195:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 196:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  DeInit LEDs.
 197:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Led: LED to be de-init. 
 198:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   This parameter can be one of the following values:
 199:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *     @arg  LED2
 200:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @note Led DeInit does not disable the GPIO clock nor disable the Mfx 
 201:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 202:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void BSP_LED_DeInit(Led_TypeDef Led)
 203:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
ARM GAS  /tmp/ccOL19yU.s 			page 5


 204:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpio_init_structure;
 205:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 206:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Turn off LED */
 207:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_WritePin(LED_PORT[Led],LED_PIN[Led], GPIO_PIN_RESET);
 208:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* DeInit the GPIO_LED pin */
 209:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpio_init_structure.Pin = LED_PIN[Led];
 210:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_DeInit(LED_PORT[Led], gpio_init_structure.Pin);
 211:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 212:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 213:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 214:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Turns selected LED On.
 215:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Led: Specifies the Led to be set on. 
 216:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   This parameter can be one of following parameters:
 217:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *     @arg LED2
 218:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 219:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void BSP_LED_On(Led_TypeDef Led)
 220:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 221:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_WritePin(LED_PORT[Led], LED_PIN[Led], GPIO_PIN_SET); 
 222:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 223:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 224:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 225:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Turns selected LED Off.
 226:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Led: Specifies the Led to be set off. 
 227:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   This parameter can be one of following parameters:
 228:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *     @arg LED2
 229:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 230:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void BSP_LED_Off(Led_TypeDef Led)
 231:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 232:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_WritePin(LED_PORT[Led], LED_PIN[Led], GPIO_PIN_RESET); 
 233:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 234:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 235:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 236:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Toggles the selected LED.
 237:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Led: Specifies the Led to be toggled. 
 238:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   This parameter can be one of following parameters:
 239:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *            @arg  LED2
 240:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 241:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void BSP_LED_Toggle(Led_TypeDef Led)
 242:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 243:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_TogglePin(LED_PORT[Led], LED_PIN[Led]);
 244:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 245:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 246:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 247:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @}
 248:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
 249:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 250:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /** @defgroup STM32F1XX_NUCLEO_BUTTON_Functions STM32F1XX NUCLEO BUTTON Functions
 251:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @{
 252:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
 253:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 254:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 255:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Configures Button GPIO and EXTI Line.
 256:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Button: Specifies the Button to be configured.
 257:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   This parameter should be: BUTTON_USER
 258:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  ButtonMode: Specifies Button mode.
 259:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   This parameter can be one of following parameters:   
 260:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *     @arg BUTTON_MODE_GPIO: Button will be used as simple IO 
ARM GAS  /tmp/ccOL19yU.s 			page 6


 261:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *     @arg BUTTON_MODE_EXTI: Button will be connected to EXTI line with interrupt
 262:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *                     generation capability  
 263:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 264:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void BSP_PB_Init(Button_TypeDef Button, ButtonMode_TypeDef ButtonMode)
 265:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 266:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef gpioinitstruct;
 267:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 268:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Enable the BUTTON Clock */
 269:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   BUTTONx_GPIO_CLK_ENABLE(Button);
 270:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 271:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin = BUTTON_PIN[Button];
 272:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pull = GPIO_NOPULL;
 273:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed = GPIO_SPEED_FREQ_MEDIUM;
 274:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 275:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if (ButtonMode == BUTTON_MODE_GPIO)
 276:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 277:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Configure Button pin as input */
 278:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     gpioinitstruct.Mode   = GPIO_MODE_INPUT;
 279:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 280:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     HAL_GPIO_Init(BUTTON_PORT[Button], &gpioinitstruct);
 281:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 282:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****  
 283:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if (ButtonMode == BUTTON_MODE_EXTI)
 284:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 285:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Configure Button pin as input with External interrupt */
 286:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     gpioinitstruct.Mode   = GPIO_MODE_IT_FALLING; 
 287:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     HAL_GPIO_Init(BUTTON_PORT[Button], &gpioinitstruct);
 288:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 289:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Enable and set Button EXTI Interrupt to the lowest priority */
 290:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     HAL_NVIC_SetPriority((IRQn_Type)(BUTTON_IRQn[Button]), 0x0F, 0);
 291:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     HAL_NVIC_EnableIRQ((IRQn_Type)(BUTTON_IRQn[Button]));
 292:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 293:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 294:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 295:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 296:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Push Button DeInit.
 297:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Button: Button to be configured
 298:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   This parameter should be: BUTTON_USER  
 299:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @note PB DeInit does not disable the GPIO clock
 300:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 301:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void BSP_PB_DeInit(Button_TypeDef Button)
 302:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 303:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef gpio_init_structure;
 304:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 305:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpio_init_structure.Pin = BUTTON_PIN[Button];
 306:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_NVIC_DisableIRQ((IRQn_Type)(BUTTON_IRQn[Button]));
 307:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_DeInit(BUTTON_PORT[Button], gpio_init_structure.Pin);
 308:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 309:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 310:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 311:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Returns the selected Button state.
 312:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Button: Specifies the Button to be checked.
 313:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *   This parameter should be: BUTTON_USER
 314:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @retval Button state.
 315:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 316:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** uint32_t BSP_PB_GetState(Button_TypeDef Button)
 317:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
ARM GAS  /tmp/ccOL19yU.s 			page 7


 318:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   return HAL_GPIO_ReadPin(BUTTON_PORT[Button], BUTTON_PIN[Button]);
 319:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 320:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 321:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @}
 322:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
 323:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 324:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 325:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @}
 326:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 327:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 328:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /** @addtogroup STM32F1XX_NUCLEO_Private_Functions
 329:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @{
 330:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */ 
 331:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 332:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #ifdef HAL_SPI_MODULE_ENABLED
 333:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /******************************************************************************
 334:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****                             BUS OPERATIONS
 335:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** *******************************************************************************/
 336:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 337:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Initialize SPI MSP.
 338:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 339:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void SPIx_MspInit(void)
 340:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
  27              		.loc 1 340 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 32
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31 0000 70B5     		push	{r4, r5, r6, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 16
  34              		.cfi_offset 4, -16
  35              		.cfi_offset 5, -12
  36              		.cfi_offset 6, -8
  37              		.cfi_offset 14, -4
  38 0002 88B0     		sub	sp, sp, #32
  39              	.LCFI1:
  40              		.cfi_def_cfa_offset 48
 341:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpioinitstruct = {0};
  41              		.loc 1 341 0
  42 0004 0025     		movs	r5, #0
  43 0006 0495     		str	r5, [sp, #16]
  44 0008 0595     		str	r5, [sp, #20]
  45 000a 0695     		str	r5, [sp, #24]
  46 000c 0795     		str	r5, [sp, #28]
  47              	.LBB2:
 342:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 343:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /*** Configure the GPIOs ***/  
 344:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Enable GPIO clock */
 345:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   NUCLEO_SPIx_SCK_GPIO_CLK_ENABLE();
  48              		.loc 1 345 0
  49 000e 1B4C     		ldr	r4, .L3
  50 0010 A369     		ldr	r3, [r4, #24]
  51 0012 43F00403 		orr	r3, r3, #4
  52 0016 A361     		str	r3, [r4, #24]
  53 0018 A369     		ldr	r3, [r4, #24]
  54 001a 03F00403 		and	r3, r3, #4
  55 001e 0193     		str	r3, [sp, #4]
ARM GAS  /tmp/ccOL19yU.s 			page 8


  56 0020 019B     		ldr	r3, [sp, #4]
  57              	.LBE2:
  58              	.LBB3:
 346:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   NUCLEO_SPIx_MISO_MOSI_GPIO_CLK_ENABLE();
  59              		.loc 1 346 0
  60 0022 A369     		ldr	r3, [r4, #24]
  61 0024 43F00403 		orr	r3, r3, #4
  62 0028 A361     		str	r3, [r4, #24]
  63 002a A369     		ldr	r3, [r4, #24]
  64 002c 03F00403 		and	r3, r3, #4
  65 0030 0293     		str	r3, [sp, #8]
  66 0032 029B     		ldr	r3, [sp, #8]
  67              	.LBE3:
 347:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 348:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Configure SPI SCK */
 349:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin        = NUCLEO_SPIx_SCK_PIN;
  68              		.loc 1 349 0
  69 0034 2023     		movs	r3, #32
  70 0036 0493     		str	r3, [sp, #16]
 350:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode       = GPIO_MODE_AF_PP;
  71              		.loc 1 350 0
  72 0038 0223     		movs	r3, #2
  73 003a 0593     		str	r3, [sp, #20]
 351:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed      = GPIO_SPEED_FREQ_HIGH;
  74              		.loc 1 351 0
  75 003c 0323     		movs	r3, #3
  76 003e 0793     		str	r3, [sp, #28]
 352:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(NUCLEO_SPIx_SCK_GPIO_PORT, &gpioinitstruct);
  77              		.loc 1 352 0
  78 0040 0F4E     		ldr	r6, .L3+4
  79 0042 04A9     		add	r1, sp, #16
  80 0044 3046     		mov	r0, r6
  81 0046 FFF7FEFF 		bl	HAL_GPIO_Init
  82              	.LVL0:
 353:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 354:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Configure SPI MISO and MOSI */ 
 355:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin        = NUCLEO_SPIx_MOSI_PIN;
  83              		.loc 1 355 0
  84 004a 8023     		movs	r3, #128
  85 004c 0493     		str	r3, [sp, #16]
 356:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(NUCLEO_SPIx_MISO_MOSI_GPIO_PORT, &gpioinitstruct);
  86              		.loc 1 356 0
  87 004e 04A9     		add	r1, sp, #16
  88 0050 3046     		mov	r0, r6
  89 0052 FFF7FEFF 		bl	HAL_GPIO_Init
  90              	.LVL1:
 357:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 358:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin        = NUCLEO_SPIx_MISO_PIN;
  91              		.loc 1 358 0
  92 0056 4023     		movs	r3, #64
  93 0058 0493     		str	r3, [sp, #16]
 359:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode       = GPIO_MODE_INPUT;
  94              		.loc 1 359 0
  95 005a 0595     		str	r5, [sp, #20]
 360:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(NUCLEO_SPIx_MISO_MOSI_GPIO_PORT, &gpioinitstruct);
  96              		.loc 1 360 0
  97 005c 04A9     		add	r1, sp, #16
ARM GAS  /tmp/ccOL19yU.s 			page 9


  98 005e 3046     		mov	r0, r6
  99 0060 FFF7FEFF 		bl	HAL_GPIO_Init
 100              	.LVL2:
 101              	.LBB4:
 361:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 362:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /*** Configure the SPI peripheral ***/ 
 363:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Enable SPI clock */
 364:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   NUCLEO_SPIx_CLK_ENABLE();
 102              		.loc 1 364 0
 103 0064 A369     		ldr	r3, [r4, #24]
 104 0066 43F48053 		orr	r3, r3, #4096
 105 006a A361     		str	r3, [r4, #24]
 106 006c A369     		ldr	r3, [r4, #24]
 107 006e 03F48053 		and	r3, r3, #4096
 108 0072 0393     		str	r3, [sp, #12]
 109 0074 039B     		ldr	r3, [sp, #12]
 110              	.LBE4:
 365:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 111              		.loc 1 365 0
 112 0076 08B0     		add	sp, sp, #32
 113              	.LCFI2:
 114              		.cfi_def_cfa_offset 16
 115              		@ sp needed
 116 0078 70BD     		pop	{r4, r5, r6, pc}
 117              	.L4:
 118 007a 00BF     		.align	2
 119              	.L3:
 120 007c 00100240 		.word	1073876992
 121 0080 00080140 		.word	1073809408
 122              		.cfi_endproc
 123              	.LFE73:
 125              		.section	.text.ADCx_MspInit,"ax",%progbits
 126              		.align	2
 127              		.thumb
 128              		.thumb_func
 130              	ADCx_MspInit:
 131              	.LFB89:
 366:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 367:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 368:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Initialize SPI HAL.
 369:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 370:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void SPIx_Init(void)
 371:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 372:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if(HAL_SPI_GetState(&hnucleo_Spi) == HAL_SPI_STATE_RESET)
 373:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 374:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* SPI Config */
 375:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Instance = NUCLEO_SPIx;
 376:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       /* SPI baudrate is set to 8 MHz maximum (PCLK2/SPI_BaudRatePrescaler = 64/8 = 8 MHz) 
 377:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****        to verify these constraints:
 378:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****           - ST7735 LCD SPI interface max baudrate is 15MHz for write and 6.66MHz for read
 379:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****             Since the provided driver doesn't use read capability from LCD, only constraint 
 380:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****             on write baudrate is considered.
 381:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****           - SD card SPI interface max baudrate is 25MHz for write/read
 382:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****           - PCLK2 max frequency is 32 MHz 
 383:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****        */
 384:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.BaudRatePrescaler  = SPI_BAUDRATEPRESCALER_8;
 385:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.Direction          = SPI_DIRECTION_2LINES;
ARM GAS  /tmp/ccOL19yU.s 			page 10


 386:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.CLKPhase           = SPI_PHASE_1EDGE;
 387:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.CLKPolarity        = SPI_POLARITY_LOW;
 388:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.CRCCalculation     = SPI_CRCCALCULATION_DISABLE;
 389:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.CRCPolynomial      = 7;
 390:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.DataSize           = SPI_DATASIZE_8BIT;
 391:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.FirstBit           = SPI_FIRSTBIT_MSB;
 392:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.NSS                = SPI_NSS_SOFT;
 393:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.TIMode             = SPI_TIMODE_DISABLE;
 394:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.Mode               = SPI_MODE_MASTER;
 395:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     
 396:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     SPIx_MspInit();
 397:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     HAL_SPI_Init(&hnucleo_Spi);
 398:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 399:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 400:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 401:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 402:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  SPI Write a byte to device
 403:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Value: value to be written
 404:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** */
 405:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void SPIx_WriteReadData(const uint8_t *DataIn, uint8_t *DataOut, uint16_t DataLength)
 406:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 407:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_StatusTypeDef status = HAL_OK;
 408:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 409:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   status = HAL_SPI_TransmitReceive(&hnucleo_Spi, (uint8_t*) DataIn, DataOut, DataLength, SpixTimeou
 410:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 411:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Check the communication status */
 412:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if(status != HAL_OK)
 413:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 414:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Execute user timeout callback */
 415:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     SPIx_Error();
 416:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 417:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 418:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 419:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 420:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  SPI Write an amount of data to device
 421:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Value: value to be written
 422:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  DataLength: number of bytes to write
 423:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 424:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void SPIx_WriteData(uint8_t *DataIn, uint16_t DataLength)
 425:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 426:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_StatusTypeDef status = HAL_OK;
 427:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 428:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   status = HAL_SPI_Transmit(&hnucleo_Spi, DataIn, DataLength, SpixTimeout);
 429:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 430:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Check the communication status */
 431:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if(status != HAL_OK)
 432:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 433:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Execute user timeout callback */
 434:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     SPIx_Error();
 435:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 436:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 437:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 438:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 439:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  SPI Write a byte to device
 440:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Value: value to be written
 441:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 442:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void SPIx_Write(uint8_t Value)
ARM GAS  /tmp/ccOL19yU.s 			page 11


 443:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 444:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_StatusTypeDef status = HAL_OK;
 445:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   uint8_t data;
 446:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 447:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   status = HAL_SPI_TransmitReceive(&hnucleo_Spi, (uint8_t*) &Value, &data, 1, SpixTimeout);
 448:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 449:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Check the communication status */
 450:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if(status != HAL_OK)
 451:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 452:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Execute user timeout callback */
 453:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     SPIx_Error();
 454:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 455:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 456:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 457:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 458:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  SPI error treatment function
 459:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 460:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void SPIx_Error (void)
 461:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 462:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* De-initialize the SPI communication BUS */
 463:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_SPI_DeInit(&hnucleo_Spi);
 464:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 465:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Re-Initiaize the SPI communication BUS */
 466:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SPIx_Init();
 467:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 468:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 469:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /******************************************************************************
 470:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****                             LINK OPERATIONS
 471:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** *******************************************************************************/
 472:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 473:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /********************************* LINK SD ************************************/
 474:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 475:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Initialize the SD Card and put it into StandBy State (Ready for 
 476:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *         data transfer).
 477:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 478:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void SD_IO_Init(void)
 479:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 480:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpioinitstruct = {0};
 481:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   uint8_t counter = 0;
 482:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 483:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* SD_CS_GPIO Periph clock enable */
 484:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SD_CS_GPIO_CLK_ENABLE();
 485:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 486:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Configure SD_CS_PIN pin: SD Card CS pin */
 487:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin    = SD_CS_PIN;
 488:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode   = GPIO_MODE_OUTPUT_PP;
 489:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pull   = GPIO_PULLUP;
 490:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed  = GPIO_SPEED_FREQ_HIGH;
 491:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(SD_CS_GPIO_PORT, &gpioinitstruct);
 492:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 493:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Configure LCD_CS_PIN pin: LCD Card CS pin */
 494:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin   = LCD_CS_PIN;
 495:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode  = GPIO_MODE_OUTPUT_PP;
 496:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pull  = GPIO_NOPULL;
 497:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed = GPIO_SPEED_FREQ_HIGH;
 498:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(SD_CS_GPIO_PORT, &gpioinitstruct);
 499:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_CS_HIGH();
ARM GAS  /tmp/ccOL19yU.s 			page 12


 500:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /*------------Put SD in SPI mode--------------*/
 501:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* SD SPI Config */
 502:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SPIx_Init();
 503:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 504:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* SD chip select high */
 505:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SD_CS_HIGH();
 506:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 507:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Send dummy byte 0xFF, 10 times with CS high */
 508:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Rise CS and MOSI for 80 clocks cycles */
 509:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   for (counter = 0; counter <= 9; counter++)
 510:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 511:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Send dummy byte 0xFF */
 512:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 513:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 514:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 515:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 516:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 517:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Set the SD_CS pin.
 518:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  pin value.
 519:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 520:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void SD_IO_CSState(uint8_t val)
 521:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 522:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if(val == 1) 
 523:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 524:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     SD_CS_HIGH();
 525:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 526:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   else
 527:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 528:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     SD_CS_LOW();
 529:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 530:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 531:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****  
 532:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 533:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Write byte(s) on the SD
 534:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  DataIn: Pointer to data buffer to write
 535:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  DataOut: Pointer to data buffer for read data
 536:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  DataLength: number of bytes to write
 537:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 538:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void SD_IO_WriteReadData(const uint8_t *DataIn, uint8_t *DataOut, uint16_t DataLength)
 539:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 540:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Send the byte */
 541:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SPIx_WriteReadData(DataIn, DataOut, DataLength);
 542:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 543:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 544:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 545:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Write a byte on the SD.
 546:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Data: byte to send.
 547:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @retval Data written
 548:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 549:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** uint8_t SD_IO_WriteByte(uint8_t Data)
 550:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 551:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   uint8_t tmp;
 552:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 553:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Send the byte */
 554:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SPIx_WriteReadData(&Data,&tmp,1);
 555:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   return tmp;
 556:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
ARM GAS  /tmp/ccOL19yU.s 			page 13


 557:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 558:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 559:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Write an amount of data on the SD.
 560:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Data: byte to send.
 561:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  DataLength: number of bytes to write
 562:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 563:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void SD_IO_ReadData(uint8_t *DataOut, uint16_t DataLength)
 564:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 565:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Send the byte */
 566:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SD_IO_WriteReadData(DataOut, DataOut, DataLength);
 567:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }   
 568:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****  
 569:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 570:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Write an amount of data on the SD.
 571:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Data: byte to send.
 572:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  DataLength: number of bytes to write
 573:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 574:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void SD_IO_WriteData(const uint8_t *Data, uint16_t DataLength)
 575:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 576:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Send the byte */
 577:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SPIx_WriteData((uint8_t *)Data, DataLength);
 578:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 579:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 580:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /********************************* LINK LCD ***********************************/
 581:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 582:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Initialize the LCD
 583:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 584:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void LCD_IO_Init(void)
 585:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 586:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpioinitstruct;
 587:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 588:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* LCD_CS_GPIO and LCD_DC_GPIO Periph clock enable */
 589:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_CS_GPIO_CLK_ENABLE();
 590:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_DC_GPIO_CLK_ENABLE();
 591:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 592:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Configure LCD_CS_PIN pin: LCD Card CS pin */
 593:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin    = LCD_CS_PIN;
 594:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode   = GPIO_MODE_OUTPUT_PP;
 595:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed  = GPIO_SPEED_FREQ_HIGH;
 596:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(SD_CS_GPIO_PORT, &gpioinitstruct);
 597:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       
 598:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Configure LCD_DC_PIN pin: LCD Card DC pin */
 599:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin    = LCD_DC_PIN;
 600:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(LCD_DC_GPIO_PORT, &gpioinitstruct);
 601:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 602:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* LCD chip select high */
 603:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_CS_HIGH();
 604:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 605:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* LCD SPI Config */
 606:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SPIx_Init();
 607:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 608:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 609:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 610:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Write command to select the LCD register.
 611:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  LCDReg: Address of the selected register.
 612:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @retval None
 613:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
ARM GAS  /tmp/ccOL19yU.s 			page 14


 614:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void LCD_IO_WriteReg(uint8_t LCDReg)
 615:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 616:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Reset LCD control line CS */
 617:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_CS_LOW();
 618:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 619:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Set LCD data/command line DC to Low */
 620:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_DC_LOW();
 621:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     
 622:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Send Command */
 623:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   SPIx_Write(LCDReg);
 624:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 625:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Deselect : Chip Select high */
 626:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_CS_HIGH();
 627:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 628:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 629:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 630:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** * @brief  Write register value.
 631:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** * @param  pData Pointer on the register value
 632:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** * @param  Size Size of byte to transmit to the register
 633:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** */
 634:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void LCD_IO_WriteMultipleData(uint8_t *pData, uint32_t Size)
 635:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 636:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   uint32_t counter = 0;
 637:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 638:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Reset LCD control line CS */
 639:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_CS_LOW();
 640:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 641:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Set LCD data/command line DC to High */
 642:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_DC_HIGH();
 643:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 644:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if (Size == 1)
 645:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 646:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Only 1 byte to be sent to LCD - general interface can be used */
 647:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Send Data */
 648:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     SPIx_Write(*pData);
 649:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 650:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   else
 651:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 652:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Several data should be sent in a raw */
 653:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Direct SPI accesses for optimization */
 654:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     for (counter = Size; counter != 0; counter--)
 655:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 656:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       while(((hnucleo_Spi.Instance->SR) & SPI_FLAG_TXE) != SPI_FLAG_TXE)
 657:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 658:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 659:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       /* Need to invert bytes for LCD*/
 660:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       *((__IO uint8_t*)&hnucleo_Spi.Instance->DR) = *(pData+1);
 661:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 662:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       while(((hnucleo_Spi.Instance->SR) & SPI_FLAG_TXE) != SPI_FLAG_TXE)
 663:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 664:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 665:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       *((__IO uint8_t*)&hnucleo_Spi.Instance->DR) = *pData;
 666:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       counter--;
 667:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       pData += 2;
 668:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }  
 669:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 670:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Wait until the bus is ready before releasing Chip select */ 
ARM GAS  /tmp/ccOL19yU.s 			page 15


 671:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     while(((hnucleo_Spi.Instance->SR) & SPI_FLAG_BSY) != RESET)
 672:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 673:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   } 
 674:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   } 
 675:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 676:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Deselect : Chip Select high */
 677:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_CS_HIGH();
 678:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 679:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 680:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 681:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Wait for loop in ms.
 682:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @param  Delay in ms.
 683:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @retval None
 684:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 685:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void LCD_Delay(uint32_t Delay)
 686:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 687:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_Delay(Delay);
 688:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 689:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 690:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #endif /* HAL_SPI_MODULE_ENABLED */
 691:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 692:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** #ifdef HAL_ADC_MODULE_ENABLED
 693:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /******************************* LINK JOYSTICK ********************************/
 694:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 695:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Initialize ADC MSP.
 696:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 697:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void ADCx_MspInit(ADC_HandleTypeDef *hadc)
 698:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 132              		.loc 1 698 0
 133              		.cfi_startproc
 134              		@ args = 0, pretend = 0, frame = 24
 135              		@ frame_needed = 0, uses_anonymous_args = 0
 136              	.LVL3:
 137 0000 10B5     		push	{r4, lr}
 138              	.LCFI3:
 139              		.cfi_def_cfa_offset 8
 140              		.cfi_offset 4, -8
 141              		.cfi_offset 14, -4
 142 0002 86B0     		sub	sp, sp, #24
 143              	.LCFI4:
 144              		.cfi_def_cfa_offset 32
 145              	.LBB5:
 699:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpioinitstruct;
 700:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 701:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /*** Configure the GPIOs ***/  
 702:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Enable GPIO clock */
 703:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   NUCLEO_ADCx_GPIO_CLK_ENABLE();
 146              		.loc 1 703 0
 147 0004 0F4C     		ldr	r4, .L7
 148 0006 A369     		ldr	r3, [r4, #24]
 149 0008 43F00803 		orr	r3, r3, #8
 150 000c A361     		str	r3, [r4, #24]
 151 000e A369     		ldr	r3, [r4, #24]
 152 0010 03F00803 		and	r3, r3, #8
 153 0014 0093     		str	r3, [sp]
 154 0016 009B     		ldr	r3, [sp]
 155              	.LBE5:
ARM GAS  /tmp/ccOL19yU.s 			page 16


 704:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 705:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Configure ADC1 Channel8 as analog input */
 706:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin    = NUCLEO_ADCx_GPIO_PIN ;
 156              		.loc 1 706 0
 157 0018 0123     		movs	r3, #1
 158 001a 0293     		str	r3, [sp, #8]
 707:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode   = GPIO_MODE_ANALOG;
 159              		.loc 1 707 0
 160 001c 0322     		movs	r2, #3
 161 001e 0392     		str	r2, [sp, #12]
 708:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pull   = GPIO_NOPULL;
 162              		.loc 1 708 0
 163 0020 0022     		movs	r2, #0
 164 0022 0492     		str	r2, [sp, #16]
 709:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed  = GPIO_SPEED_FREQ_MEDIUM;
 165              		.loc 1 709 0
 166 0024 0593     		str	r3, [sp, #20]
 710:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(NUCLEO_ADCx_GPIO_PORT, &gpioinitstruct);
 167              		.loc 1 710 0
 168 0026 02A9     		add	r1, sp, #8
 169 0028 0748     		ldr	r0, .L7+4
 170              	.LVL4:
 171 002a FFF7FEFF 		bl	HAL_GPIO_Init
 172              	.LVL5:
 173              	.LBB6:
 711:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 712:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /*** Configure the ADC peripheral ***/ 
 713:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Enable ADC clock */
 714:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   NUCLEO_ADCx_CLK_ENABLE(); 
 174              		.loc 1 714 0
 175 002e A369     		ldr	r3, [r4, #24]
 176 0030 43F40073 		orr	r3, r3, #512
 177 0034 A361     		str	r3, [r4, #24]
 178 0036 A369     		ldr	r3, [r4, #24]
 179 0038 03F40073 		and	r3, r3, #512
 180 003c 0193     		str	r3, [sp, #4]
 181 003e 019B     		ldr	r3, [sp, #4]
 182              	.LBE6:
 715:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 183              		.loc 1 715 0
 184 0040 06B0     		add	sp, sp, #24
 185              	.LCFI5:
 186              		.cfi_def_cfa_offset 8
 187              		@ sp needed
 188 0042 10BD     		pop	{r4, pc}
 189              	.L8:
 190              		.align	2
 191              	.L7:
 192 0044 00100240 		.word	1073876992
 193 0048 000C0140 		.word	1073810432
 194              		.cfi_endproc
 195              	.LFE89:
 197              		.section	.text.ADCx_MspDeInit,"ax",%progbits
 198              		.align	2
 199              		.thumb
 200              		.thumb_func
 202              	ADCx_MspDeInit:
ARM GAS  /tmp/ccOL19yU.s 			page 17


 203              	.LFB90:
 716:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 717:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 718:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  DeInitializes ADC MSP.
 719:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @note ADC DeInit does not disable the GPIO clock
 720:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 721:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void ADCx_MspDeInit(ADC_HandleTypeDef *hadc)
 722:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 204              		.loc 1 722 0
 205              		.cfi_startproc
 206              		@ args = 0, pretend = 0, frame = 0
 207              		@ frame_needed = 0, uses_anonymous_args = 0
 208              	.LVL6:
 209 0000 08B5     		push	{r3, lr}
 210              	.LCFI6:
 211              		.cfi_def_cfa_offset 8
 212              		.cfi_offset 3, -8
 213              		.cfi_offset 14, -4
 723:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpioinitstruct;
 724:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 725:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /*** DeInit the ADC peripheral ***/ 
 726:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Disable ADC clock */
 727:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   NUCLEO_ADCx_CLK_DISABLE(); 
 214              		.loc 1 727 0
 215 0002 054A     		ldr	r2, .L11
 216 0004 9369     		ldr	r3, [r2, #24]
 217 0006 23F40073 		bic	r3, r3, #512
 218 000a 9361     		str	r3, [r2, #24]
 728:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 729:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Configure the selected ADC Channel as analog input */
 730:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pin = NUCLEO_ADCx_GPIO_PIN ;
 731:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_DeInit(NUCLEO_ADCx_GPIO_PORT, gpioinitstruct.Pin);
 219              		.loc 1 731 0
 220 000c 0121     		movs	r1, #1
 221 000e 0348     		ldr	r0, .L11+4
 222              	.LVL7:
 223 0010 FFF7FEFF 		bl	HAL_GPIO_DeInit
 224              	.LVL8:
 225 0014 08BD     		pop	{r3, pc}
 226              	.L12:
 227 0016 00BF     		.align	2
 228              	.L11:
 229 0018 00100240 		.word	1073876992
 230 001c 000C0140 		.word	1073810432
 231              		.cfi_endproc
 232              	.LFE90:
 234              		.section	.text.SPIx_Init,"ax",%progbits
 235              		.align	2
 236              		.thumb
 237              		.thumb_func
 239              	SPIx_Init:
 240              	.LFB74:
 371:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if(HAL_SPI_GetState(&hnucleo_Spi) == HAL_SPI_STATE_RESET)
 241              		.loc 1 371 0
 242              		.cfi_startproc
 243              		@ args = 0, pretend = 0, frame = 0
 244              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccOL19yU.s 			page 18


 245 0000 10B5     		push	{r4, lr}
 246              	.LCFI7:
 247              		.cfi_def_cfa_offset 8
 248              		.cfi_offset 4, -8
 249              		.cfi_offset 14, -4
 372:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 250              		.loc 1 372 0
 251 0002 0F48     		ldr	r0, .L16
 252 0004 FFF7FEFF 		bl	HAL_SPI_GetState
 253              	.LVL9:
 254 0008 C8B9     		cbnz	r0, .L13
 375:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       /* SPI baudrate is set to 8 MHz maximum (PCLK2/SPI_BaudRatePrescaler = 64/8 = 8 MHz) 
 255              		.loc 1 375 0
 256 000a 0D4C     		ldr	r4, .L16
 257 000c 0D4B     		ldr	r3, .L16+4
 258 000e 2360     		str	r3, [r4]
 384:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.Direction          = SPI_DIRECTION_2LINES;
 259              		.loc 1 384 0
 260 0010 1023     		movs	r3, #16
 261 0012 E361     		str	r3, [r4, #28]
 385:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.CLKPhase           = SPI_PHASE_1EDGE;
 262              		.loc 1 385 0
 263 0014 0023     		movs	r3, #0
 264 0016 A360     		str	r3, [r4, #8]
 386:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.CLKPolarity        = SPI_POLARITY_LOW;
 265              		.loc 1 386 0
 266 0018 6361     		str	r3, [r4, #20]
 387:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.CRCCalculation     = SPI_CRCCALCULATION_DISABLE;
 267              		.loc 1 387 0
 268 001a 2361     		str	r3, [r4, #16]
 388:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.CRCPolynomial      = 7;
 269              		.loc 1 388 0
 270 001c A362     		str	r3, [r4, #40]
 389:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.DataSize           = SPI_DATASIZE_8BIT;
 271              		.loc 1 389 0
 272 001e 0722     		movs	r2, #7
 273 0020 E262     		str	r2, [r4, #44]
 390:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.FirstBit           = SPI_FIRSTBIT_MSB;
 274              		.loc 1 390 0
 275 0022 E360     		str	r3, [r4, #12]
 391:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.NSS                = SPI_NSS_SOFT;
 276              		.loc 1 391 0
 277 0024 2362     		str	r3, [r4, #32]
 392:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.TIMode             = SPI_TIMODE_DISABLE;
 278              		.loc 1 392 0
 279 0026 4FF40072 		mov	r2, #512
 280 002a A261     		str	r2, [r4, #24]
 393:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Spi.Init.Mode               = SPI_MODE_MASTER;
 281              		.loc 1 393 0
 282 002c 6362     		str	r3, [r4, #36]
 394:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     
 283              		.loc 1 394 0
 284 002e 4FF48273 		mov	r3, #260
 285 0032 6360     		str	r3, [r4, #4]
 396:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     HAL_SPI_Init(&hnucleo_Spi);
 286              		.loc 1 396 0
 287 0034 FFF7FEFF 		bl	SPIx_MspInit
ARM GAS  /tmp/ccOL19yU.s 			page 19


 288              	.LVL10:
 397:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 289              		.loc 1 397 0
 290 0038 2046     		mov	r0, r4
 291 003a FFF7FEFF 		bl	HAL_SPI_Init
 292              	.LVL11:
 293              	.L13:
 294 003e 10BD     		pop	{r4, pc}
 295              	.L17:
 296              		.align	2
 297              	.L16:
 298 0040 00000000 		.word	.LANCHOR0
 299 0044 00300140 		.word	1073819648
 300              		.cfi_endproc
 301              	.LFE74:
 303              		.section	.text.SPIx_Error,"ax",%progbits
 304              		.align	2
 305              		.thumb
 306              		.thumb_func
 308              	SPIx_Error:
 309              	.LFB78:
 461:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* De-initialize the SPI communication BUS */
 310              		.loc 1 461 0
 311              		.cfi_startproc
 312              		@ args = 0, pretend = 0, frame = 0
 313              		@ frame_needed = 0, uses_anonymous_args = 0
 314 0000 08B5     		push	{r3, lr}
 315              	.LCFI8:
 316              		.cfi_def_cfa_offset 8
 317              		.cfi_offset 3, -8
 318              		.cfi_offset 14, -4
 463:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 319              		.loc 1 463 0
 320 0002 0348     		ldr	r0, .L20
 321 0004 FFF7FEFF 		bl	HAL_SPI_DeInit
 322              	.LVL12:
 466:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 323              		.loc 1 466 0
 324 0008 FFF7FEFF 		bl	SPIx_Init
 325              	.LVL13:
 326 000c 08BD     		pop	{r3, pc}
 327              	.L21:
 328 000e 00BF     		.align	2
 329              	.L20:
 330 0010 00000000 		.word	.LANCHOR0
 331              		.cfi_endproc
 332              	.LFE78:
 334              		.section	.text.SPIx_WriteReadData,"ax",%progbits
 335              		.align	2
 336              		.thumb
 337              		.thumb_func
 339              	SPIx_WriteReadData:
 340              	.LFB75:
 406:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_StatusTypeDef status = HAL_OK;
 341              		.loc 1 406 0
 342              		.cfi_startproc
 343              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccOL19yU.s 			page 20


 344              		@ frame_needed = 0, uses_anonymous_args = 0
 345              	.LVL14:
 346 0000 00B5     		push	{lr}
 347              	.LCFI9:
 348              		.cfi_def_cfa_offset 4
 349              		.cfi_offset 14, -4
 350 0002 83B0     		sub	sp, sp, #12
 351              	.LCFI10:
 352              		.cfi_def_cfa_offset 16
 353              	.LVL15:
 409:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 354              		.loc 1 409 0
 355 0004 074B     		ldr	r3, .L25
 356 0006 1B68     		ldr	r3, [r3]
 357 0008 0093     		str	r3, [sp]
 358 000a 1346     		mov	r3, r2
 359 000c 0A46     		mov	r2, r1
 360              	.LVL16:
 361 000e 0146     		mov	r1, r0
 362              	.LVL17:
 363 0010 0548     		ldr	r0, .L25+4
 364              	.LVL18:
 365 0012 FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 366              	.LVL19:
 412:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 367              		.loc 1 412 0
 368 0016 08B1     		cbz	r0, .L22
 415:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 369              		.loc 1 415 0
 370 0018 FFF7FEFF 		bl	SPIx_Error
 371              	.LVL20:
 372              	.L22:
 417:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 373              		.loc 1 417 0
 374 001c 03B0     		add	sp, sp, #12
 375              	.LCFI11:
 376              		.cfi_def_cfa_offset 4
 377              		@ sp needed
 378 001e 5DF804FB 		ldr	pc, [sp], #4
 379              	.L26:
 380 0022 00BF     		.align	2
 381              	.L25:
 382 0024 00000000 		.word	.LANCHOR1
 383 0028 00000000 		.word	.LANCHOR0
 384              		.cfi_endproc
 385              	.LFE75:
 387              		.section	.text.SPIx_Write,"ax",%progbits
 388              		.align	2
 389              		.thumb
 390              		.thumb_func
 392              	SPIx_Write:
 393              	.LFB77:
 443:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_StatusTypeDef status = HAL_OK;
 394              		.loc 1 443 0
 395              		.cfi_startproc
 396              		@ args = 0, pretend = 0, frame = 16
 397              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccOL19yU.s 			page 21


 398              	.LVL21:
 399 0000 00B5     		push	{lr}
 400              	.LCFI12:
 401              		.cfi_def_cfa_offset 4
 402              		.cfi_offset 14, -4
 403 0002 87B0     		sub	sp, sp, #28
 404              	.LCFI13:
 405              		.cfi_def_cfa_offset 32
 406 0004 8DF80F00 		strb	r0, [sp, #15]
 407              	.LVL22:
 447:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 408              		.loc 1 447 0
 409 0008 084B     		ldr	r3, .L30
 410 000a 1B68     		ldr	r3, [r3]
 411 000c 0093     		str	r3, [sp]
 412 000e 0123     		movs	r3, #1
 413 0010 0DF11702 		add	r2, sp, #23
 414 0014 0DF10F01 		add	r1, sp, #15
 415 0018 0548     		ldr	r0, .L30+4
 416              	.LVL23:
 417 001a FFF7FEFF 		bl	HAL_SPI_TransmitReceive
 418              	.LVL24:
 450:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 419              		.loc 1 450 0
 420 001e 08B1     		cbz	r0, .L27
 453:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 421              		.loc 1 453 0
 422 0020 FFF7FEFF 		bl	SPIx_Error
 423              	.LVL25:
 424              	.L27:
 455:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 425              		.loc 1 455 0
 426 0024 07B0     		add	sp, sp, #28
 427              	.LCFI14:
 428              		.cfi_def_cfa_offset 4
 429              		@ sp needed
 430 0026 5DF804FB 		ldr	pc, [sp], #4
 431              	.LVL26:
 432              	.L31:
 433 002a 00BF     		.align	2
 434              	.L30:
 435 002c 00000000 		.word	.LANCHOR1
 436 0030 00000000 		.word	.LANCHOR0
 437              		.cfi_endproc
 438              	.LFE77:
 440              		.section	.text.SPIx_WriteData,"ax",%progbits
 441              		.align	2
 442              		.thumb
 443              		.thumb_func
 445              	SPIx_WriteData:
 446              	.LFB76:
 425:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_StatusTypeDef status = HAL_OK;
 447              		.loc 1 425 0
 448              		.cfi_startproc
 449              		@ args = 0, pretend = 0, frame = 0
 450              		@ frame_needed = 0, uses_anonymous_args = 0
 451              	.LVL27:
ARM GAS  /tmp/ccOL19yU.s 			page 22


 452 0000 08B5     		push	{r3, lr}
 453              	.LCFI15:
 454              		.cfi_def_cfa_offset 8
 455              		.cfi_offset 3, -8
 456              		.cfi_offset 14, -4
 457              	.LVL28:
 428:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 458              		.loc 1 428 0
 459 0002 054B     		ldr	r3, .L35
 460 0004 1B68     		ldr	r3, [r3]
 461 0006 0A46     		mov	r2, r1
 462 0008 0146     		mov	r1, r0
 463              	.LVL29:
 464 000a 0448     		ldr	r0, .L35+4
 465              	.LVL30:
 466 000c FFF7FEFF 		bl	HAL_SPI_Transmit
 467              	.LVL31:
 431:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 468              		.loc 1 431 0
 469 0010 08B1     		cbz	r0, .L32
 434:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 470              		.loc 1 434 0
 471 0012 FFF7FEFF 		bl	SPIx_Error
 472              	.LVL32:
 473              	.L32:
 474 0016 08BD     		pop	{r3, pc}
 475              	.L36:
 476              		.align	2
 477              	.L35:
 478 0018 00000000 		.word	.LANCHOR1
 479 001c 00000000 		.word	.LANCHOR0
 480              		.cfi_endproc
 481              	.LFE76:
 483              		.section	.text.ADCx_Init,"ax",%progbits
 484              		.align	2
 485              		.thumb
 486              		.thumb_func
 488              	ADCx_Init:
 489              	.LFB91:
 732:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 733:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Disable GPIO clock has to be done by the application*/
 734:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* NUCLEO_ADCx_GPIO_CLK_DISABLE(); */
 735:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 736:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 737:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 738:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Initializes ADC HAL.
 739:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 740:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static HAL_StatusTypeDef ADCx_Init(void)
 741:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 490              		.loc 1 741 0
 491              		.cfi_startproc
 492              		@ args = 0, pretend = 0, frame = 0
 493              		@ frame_needed = 0, uses_anonymous_args = 0
 494 0000 10B5     		push	{r4, lr}
 495              	.LCFI16:
 496              		.cfi_def_cfa_offset 8
 497              		.cfi_offset 4, -8
ARM GAS  /tmp/ccOL19yU.s 			page 23


 498              		.cfi_offset 14, -4
 742:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Set ADC instance */
 743:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   hnucleo_Adc.Instance = NUCLEO_ADCx;
 499              		.loc 1 743 0
 500 0002 1248     		ldr	r0, .L42
 501 0004 124B     		ldr	r3, .L42+4
 502 0006 0360     		str	r3, [r0]
 744:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 745:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if(HAL_ADC_GetState(&hnucleo_Adc) == HAL_ADC_STATE_RESET)
 503              		.loc 1 745 0
 504 0008 FFF7FEFF 		bl	HAL_ADC_GetState
 505              	.LVL33:
 506 000c C8B9     		cbnz	r0, .L39
 746:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 747:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* ADC Config */
 748:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Adc.Init.DataAlign = ADC_DATAALIGN_RIGHT;
 507              		.loc 1 748 0
 508 000e 0F4C     		ldr	r4, .L42
 509 0010 0023     		movs	r3, #0
 510 0012 6360     		str	r3, [r4, #4]
 749:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Adc.Init.ScanConvMode = ADC_SCAN_DISABLE;
 511              		.loc 1 749 0
 512 0014 A360     		str	r3, [r4, #8]
 750:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Adc.Init.ContinuousConvMode = DISABLE;
 513              		.loc 1 750 0
 514 0016 E360     		str	r3, [r4, #12]
 751:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Adc.Init.NbrOfConversion = 1;
 515              		.loc 1 751 0
 516 0018 0122     		movs	r2, #1
 517 001a 2261     		str	r2, [r4, #16]
 752:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Adc.Init.DiscontinuousConvMode = DISABLE;
 518              		.loc 1 752 0
 519 001c 6361     		str	r3, [r4, #20]
 753:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Adc.Init.NbrOfDiscConversion = 1;
 520              		.loc 1 753 0
 521 001e A261     		str	r2, [r4, #24]
 754:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Adc.Init.ExternalTrigConv = ADC_SOFTWARE_START;
 522              		.loc 1 754 0
 523 0020 4FF46023 		mov	r3, #917504
 524 0024 E361     		str	r3, [r4, #28]
 755:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     
 756:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Initialize MSP related to ADC */
 757:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     ADCx_MspInit(&hnucleo_Adc);
 525              		.loc 1 757 0
 526 0026 2046     		mov	r0, r4
 527 0028 FFF7FEFF 		bl	ADCx_MspInit
 528              	.LVL34:
 758:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     
 759:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Initialize ADC */
 760:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     if (HAL_ADC_Init(&hnucleo_Adc) != HAL_OK)
 529              		.loc 1 760 0
 530 002c 2046     		mov	r0, r4
 531 002e FFF7FEFF 		bl	HAL_ADC_Init
 532              	.LVL35:
 533 0032 40B9     		cbnz	r0, .L40
 761:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     {
 762:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       return HAL_ERROR;
ARM GAS  /tmp/ccOL19yU.s 			page 24


 763:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     }
 764:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     
 765:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Run ADC calibration */
 766:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     if (HAL_ADCEx_Calibration_Start(&hnucleo_Adc) != HAL_OK)
 534              		.loc 1 766 0
 535 0034 2046     		mov	r0, r4
 536 0036 FFF7FEFF 		bl	HAL_ADCEx_Calibration_Start
 537              	.LVL36:
 538 003a 0346     		mov	r3, r0
 539 003c 20B1     		cbz	r0, .L38
 767:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     {
 768:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       return HAL_ERROR;
 540              		.loc 1 768 0
 541 003e 0123     		movs	r3, #1
 542 0040 02E0     		b	.L38
 543              	.L39:
 769:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     }
 770:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 771:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 772:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   return HAL_OK;
 544              		.loc 1 772 0
 545 0042 0023     		movs	r3, #0
 546 0044 00E0     		b	.L38
 547              	.L40:
 762:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     }
 548              		.loc 1 762 0
 549 0046 0123     		movs	r3, #1
 550              	.L38:
 773:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }  
 551              		.loc 1 773 0
 552 0048 1846     		mov	r0, r3
 553 004a 10BD     		pop	{r4, pc}
 554              	.L43:
 555              		.align	2
 556              	.L42:
 557 004c 00000000 		.word	.LANCHOR2
 558 0050 00240140 		.word	1073816576
 559              		.cfi_endproc
 560              	.LFE91:
 562              		.section	.text.ADCx_DeInit,"ax",%progbits
 563              		.align	2
 564              		.thumb
 565              		.thumb_func
 567              	ADCx_DeInit:
 568              	.LFB92:
 774:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 775:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 776:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Initializes ADC HAL.
 777:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 778:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** static void ADCx_DeInit(void)
 779:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 569              		.loc 1 779 0
 570              		.cfi_startproc
 571              		@ args = 0, pretend = 0, frame = 0
 572              		@ frame_needed = 0, uses_anonymous_args = 0
 573 0000 10B5     		push	{r4, lr}
 574              	.LCFI17:
ARM GAS  /tmp/ccOL19yU.s 			page 25


 575              		.cfi_def_cfa_offset 8
 576              		.cfi_offset 4, -8
 577              		.cfi_offset 14, -4
 780:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     hnucleo_Adc.Instance   = NUCLEO_ADCx;
 578              		.loc 1 780 0
 579 0002 054C     		ldr	r4, .L46
 580 0004 054B     		ldr	r3, .L46+4
 581 0006 2360     		str	r3, [r4]
 781:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     
 782:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     HAL_ADC_DeInit(&hnucleo_Adc);
 582              		.loc 1 782 0
 583 0008 2046     		mov	r0, r4
 584 000a FFF7FEFF 		bl	HAL_ADC_DeInit
 585              	.LVL37:
 783:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     ADCx_MspDeInit(&hnucleo_Adc);
 586              		.loc 1 783 0
 587 000e 2046     		mov	r0, r4
 588 0010 FFF7FEFF 		bl	ADCx_MspDeInit
 589              	.LVL38:
 590 0014 10BD     		pop	{r4, pc}
 591              	.L47:
 592 0016 00BF     		.align	2
 593              	.L46:
 594 0018 00000000 		.word	.LANCHOR2
 595 001c 00240140 		.word	1073816576
 596              		.cfi_endproc
 597              	.LFE92:
 599              		.section	.text.BSP_GetVersion,"ax",%progbits
 600              		.align	2
 601              		.global	BSP_GetVersion
 602              		.thumb
 603              		.thumb_func
 605              	BSP_GetVersion:
 606              	.LFB64:
 162:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   return __STM32F1XX_NUCLEO_BSP_VERSION;
 607              		.loc 1 162 0
 608              		.cfi_startproc
 609              		@ args = 0, pretend = 0, frame = 0
 610              		@ frame_needed = 0, uses_anonymous_args = 0
 611              		@ link register save eliminated.
 164:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 612              		.loc 1 164 0
 613 0000 0048     		ldr	r0, .L49
 614 0002 7047     		bx	lr
 615              	.L50:
 616              		.align	2
 617              	.L49:
 618 0004 00040001 		.word	16778240
 619              		.cfi_endproc
 620              	.LFE64:
 622              		.section	.text.BSP_LED_Init,"ax",%progbits
 623              		.align	2
 624              		.global	BSP_LED_Init
 625              		.thumb
 626              		.thumb_func
 628              	BSP_LED_Init:
 629              	.LFB65:
ARM GAS  /tmp/ccOL19yU.s 			page 26


 177:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpioinitstruct;
 630              		.loc 1 177 0
 631              		.cfi_startproc
 632              		@ args = 0, pretend = 0, frame = 24
 633              		@ frame_needed = 0, uses_anonymous_args = 0
 634              	.LVL39:
 635 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 636              	.LCFI18:
 637              		.cfi_def_cfa_offset 20
 638              		.cfi_offset 4, -20
 639              		.cfi_offset 5, -16
 640              		.cfi_offset 6, -12
 641              		.cfi_offset 7, -8
 642              		.cfi_offset 14, -4
 643 0002 87B0     		sub	sp, sp, #28
 644              	.LCFI19:
 645              		.cfi_def_cfa_offset 48
 181:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 646              		.loc 1 181 0
 647 0004 0546     		mov	r5, r0
 648 0006 48B9     		cbnz	r0, .L52
 649              	.LBB7:
 181:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 650              		.loc 1 181 0 is_stmt 0 discriminator 1
 651 0008 0F4B     		ldr	r3, .L54
 652 000a 9A69     		ldr	r2, [r3, #24]
 653 000c 42F00402 		orr	r2, r2, #4
 654 0010 9A61     		str	r2, [r3, #24]
 655 0012 9B69     		ldr	r3, [r3, #24]
 656 0014 03F00403 		and	r3, r3, #4
 657 0018 0193     		str	r3, [sp, #4]
 658 001a 019B     		ldr	r3, [sp, #4]
 659              	.L52:
 660              	.LBE7:
 184:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode   = GPIO_MODE_OUTPUT_PP;
 661              		.loc 1 184 0 is_stmt 1
 662 001c 2026     		movs	r6, #32
 663 001e 0296     		str	r6, [sp, #8]
 185:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pull   = GPIO_NOPULL;
 664              		.loc 1 185 0
 665 0020 0123     		movs	r3, #1
 666 0022 0393     		str	r3, [sp, #12]
 186:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed  = GPIO_SPEED_FREQ_HIGH;
 667              		.loc 1 186 0
 668 0024 0027     		movs	r7, #0
 669 0026 0497     		str	r7, [sp, #16]
 187:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 670              		.loc 1 187 0
 671 0028 0323     		movs	r3, #3
 672 002a 0593     		str	r3, [sp, #20]
 189:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 673              		.loc 1 189 0
 674 002c 074C     		ldr	r4, .L54+4
 675 002e 02A9     		add	r1, sp, #8
 676 0030 54F82500 		ldr	r0, [r4, r5, lsl #2]
 677              	.LVL40:
 678 0034 FFF7FEFF 		bl	HAL_GPIO_Init
ARM GAS  /tmp/ccOL19yU.s 			page 27


 679              	.LVL41:
 192:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 680              		.loc 1 192 0
 681 0038 3A46     		mov	r2, r7
 682 003a 3146     		mov	r1, r6
 683 003c 54F82500 		ldr	r0, [r4, r5, lsl #2]
 684 0040 FFF7FEFF 		bl	HAL_GPIO_WritePin
 685              	.LVL42:
 193:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 686              		.loc 1 193 0
 687 0044 07B0     		add	sp, sp, #28
 688              	.LCFI20:
 689              		.cfi_def_cfa_offset 20
 690              		@ sp needed
 691 0046 F0BD     		pop	{r4, r5, r6, r7, pc}
 692              	.L55:
 693              		.align	2
 694              	.L54:
 695 0048 00100240 		.word	1073876992
 696 004c 00000000 		.word	.LANCHOR3
 697              		.cfi_endproc
 698              	.LFE65:
 700              		.section	.text.BSP_LED_DeInit,"ax",%progbits
 701              		.align	2
 702              		.global	BSP_LED_DeInit
 703              		.thumb
 704              		.thumb_func
 706              	BSP_LED_DeInit:
 707              	.LFB66:
 203:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpio_init_structure;
 708              		.loc 1 203 0
 709              		.cfi_startproc
 710              		@ args = 0, pretend = 0, frame = 0
 711              		@ frame_needed = 0, uses_anonymous_args = 0
 712              	.LVL43:
 713 0000 38B5     		push	{r3, r4, r5, lr}
 714              	.LCFI21:
 715              		.cfi_def_cfa_offset 16
 716              		.cfi_offset 3, -16
 717              		.cfi_offset 4, -12
 718              		.cfi_offset 5, -8
 719              		.cfi_offset 14, -4
 720 0002 0546     		mov	r5, r0
 207:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* DeInit the GPIO_LED pin */
 721              		.loc 1 207 0
 722 0004 064C     		ldr	r4, .L58
 723 0006 0022     		movs	r2, #0
 724 0008 2021     		movs	r1, #32
 725 000a 54F82000 		ldr	r0, [r4, r0, lsl #2]
 726              	.LVL44:
 727 000e FFF7FEFF 		bl	HAL_GPIO_WritePin
 728              	.LVL45:
 210:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 729              		.loc 1 210 0
 730 0012 2021     		movs	r1, #32
 731 0014 54F82500 		ldr	r0, [r4, r5, lsl #2]
 732 0018 FFF7FEFF 		bl	HAL_GPIO_DeInit
ARM GAS  /tmp/ccOL19yU.s 			page 28


 733              	.LVL46:
 734 001c 38BD     		pop	{r3, r4, r5, pc}
 735              	.L59:
 736 001e 00BF     		.align	2
 737              	.L58:
 738 0020 00000000 		.word	.LANCHOR3
 739              		.cfi_endproc
 740              	.LFE66:
 742              		.section	.text.BSP_LED_On,"ax",%progbits
 743              		.align	2
 744              		.global	BSP_LED_On
 745              		.thumb
 746              		.thumb_func
 748              	BSP_LED_On:
 749              	.LFB67:
 220:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_WritePin(LED_PORT[Led], LED_PIN[Led], GPIO_PIN_SET); 
 750              		.loc 1 220 0
 751              		.cfi_startproc
 752              		@ args = 0, pretend = 0, frame = 0
 753              		@ frame_needed = 0, uses_anonymous_args = 0
 754              	.LVL47:
 755 0000 08B5     		push	{r3, lr}
 756              	.LCFI22:
 757              		.cfi_def_cfa_offset 8
 758              		.cfi_offset 3, -8
 759              		.cfi_offset 14, -4
 221:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 760              		.loc 1 221 0
 761 0002 0122     		movs	r2, #1
 762 0004 2021     		movs	r1, #32
 763 0006 034B     		ldr	r3, .L62
 764 0008 53F82000 		ldr	r0, [r3, r0, lsl #2]
 765              	.LVL48:
 766 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 767              	.LVL49:
 768 0010 08BD     		pop	{r3, pc}
 769              	.L63:
 770 0012 00BF     		.align	2
 771              	.L62:
 772 0014 00000000 		.word	.LANCHOR3
 773              		.cfi_endproc
 774              	.LFE67:
 776              		.section	.text.BSP_LED_Off,"ax",%progbits
 777              		.align	2
 778              		.global	BSP_LED_Off
 779              		.thumb
 780              		.thumb_func
 782              	BSP_LED_Off:
 783              	.LFB68:
 231:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_WritePin(LED_PORT[Led], LED_PIN[Led], GPIO_PIN_RESET); 
 784              		.loc 1 231 0
 785              		.cfi_startproc
 786              		@ args = 0, pretend = 0, frame = 0
 787              		@ frame_needed = 0, uses_anonymous_args = 0
 788              	.LVL50:
 789 0000 08B5     		push	{r3, lr}
 790              	.LCFI23:
ARM GAS  /tmp/ccOL19yU.s 			page 29


 791              		.cfi_def_cfa_offset 8
 792              		.cfi_offset 3, -8
 793              		.cfi_offset 14, -4
 232:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 794              		.loc 1 232 0
 795 0002 0022     		movs	r2, #0
 796 0004 2021     		movs	r1, #32
 797 0006 034B     		ldr	r3, .L66
 798 0008 53F82000 		ldr	r0, [r3, r0, lsl #2]
 799              	.LVL51:
 800 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 801              	.LVL52:
 802 0010 08BD     		pop	{r3, pc}
 803              	.L67:
 804 0012 00BF     		.align	2
 805              	.L66:
 806 0014 00000000 		.word	.LANCHOR3
 807              		.cfi_endproc
 808              	.LFE68:
 810              		.section	.text.BSP_LED_Toggle,"ax",%progbits
 811              		.align	2
 812              		.global	BSP_LED_Toggle
 813              		.thumb
 814              		.thumb_func
 816              	BSP_LED_Toggle:
 817              	.LFB69:
 242:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_TogglePin(LED_PORT[Led], LED_PIN[Led]);
 818              		.loc 1 242 0
 819              		.cfi_startproc
 820              		@ args = 0, pretend = 0, frame = 0
 821              		@ frame_needed = 0, uses_anonymous_args = 0
 822              	.LVL53:
 823 0000 08B5     		push	{r3, lr}
 824              	.LCFI24:
 825              		.cfi_def_cfa_offset 8
 826              		.cfi_offset 3, -8
 827              		.cfi_offset 14, -4
 243:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 828              		.loc 1 243 0
 829 0002 2021     		movs	r1, #32
 830 0004 024B     		ldr	r3, .L70
 831 0006 53F82000 		ldr	r0, [r3, r0, lsl #2]
 832              	.LVL54:
 833 000a FFF7FEFF 		bl	HAL_GPIO_TogglePin
 834              	.LVL55:
 835 000e 08BD     		pop	{r3, pc}
 836              	.L71:
 837              		.align	2
 838              	.L70:
 839 0010 00000000 		.word	.LANCHOR3
 840              		.cfi_endproc
 841              	.LFE69:
 843              		.section	.text.BSP_PB_Init,"ax",%progbits
 844              		.align	2
 845              		.global	BSP_PB_Init
 846              		.thumb
 847              		.thumb_func
ARM GAS  /tmp/ccOL19yU.s 			page 30


 849              	BSP_PB_Init:
 850              	.LFB70:
 265:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef gpioinitstruct;
 851              		.loc 1 265 0
 852              		.cfi_startproc
 853              		@ args = 0, pretend = 0, frame = 24
 854              		@ frame_needed = 0, uses_anonymous_args = 0
 855              	.LVL56:
 856 0000 30B5     		push	{r4, r5, lr}
 857              	.LCFI25:
 858              		.cfi_def_cfa_offset 12
 859              		.cfi_offset 4, -12
 860              		.cfi_offset 5, -8
 861              		.cfi_offset 14, -4
 862 0002 87B0     		sub	sp, sp, #28
 863              	.LCFI26:
 864              		.cfi_def_cfa_offset 40
 865 0004 0C46     		mov	r4, r1
 269:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 866              		.loc 1 269 0
 867 0006 0546     		mov	r5, r0
 868 0008 48B9     		cbnz	r0, .L73
 869              	.LBB8:
 269:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 870              		.loc 1 269 0 is_stmt 0 discriminator 1
 871 000a 174B     		ldr	r3, .L77
 872 000c 9A69     		ldr	r2, [r3, #24]
 873 000e 42F01002 		orr	r2, r2, #16
 874 0012 9A61     		str	r2, [r3, #24]
 875 0014 9B69     		ldr	r3, [r3, #24]
 876 0016 03F01003 		and	r3, r3, #16
 877 001a 0193     		str	r3, [sp, #4]
 878 001c 019B     		ldr	r3, [sp, #4]
 879              	.L73:
 880              	.LBE8:
 271:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pull = GPIO_NOPULL;
 881              		.loc 1 271 0 is_stmt 1
 882 001e 4FF40053 		mov	r3, #8192
 883 0022 0293     		str	r3, [sp, #8]
 272:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed = GPIO_SPEED_FREQ_MEDIUM;
 884              		.loc 1 272 0
 885 0024 0023     		movs	r3, #0
 886 0026 0493     		str	r3, [sp, #16]
 273:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 887              		.loc 1 273 0
 888 0028 0123     		movs	r3, #1
 889 002a 0593     		str	r3, [sp, #20]
 275:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 890              		.loc 1 275 0
 891 002c 3CB9     		cbnz	r4, .L74
 278:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 892              		.loc 1 278 0
 893 002e 0023     		movs	r3, #0
 894 0030 0393     		str	r3, [sp, #12]
 280:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 895              		.loc 1 280 0
 896 0032 02A9     		add	r1, sp, #8
ARM GAS  /tmp/ccOL19yU.s 			page 31


 897              	.LVL57:
 898 0034 0D4B     		ldr	r3, .L77+4
 899 0036 53F82500 		ldr	r0, [r3, r5, lsl #2]
 900              	.LVL58:
 901 003a FFF7FEFF 		bl	HAL_GPIO_Init
 902              	.LVL59:
 903              	.L74:
 283:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 904              		.loc 1 283 0
 905 003e 012C     		cmp	r4, #1
 906 0040 0FD1     		bne	.L72
 286:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     HAL_GPIO_Init(BUTTON_PORT[Button], &gpioinitstruct);
 907              		.loc 1 286 0
 908 0042 0B4B     		ldr	r3, .L77+8
 909 0044 0393     		str	r3, [sp, #12]
 287:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 910              		.loc 1 287 0
 911 0046 02A9     		add	r1, sp, #8
 912 0048 084B     		ldr	r3, .L77+4
 913 004a 53F82500 		ldr	r0, [r3, r5, lsl #2]
 914 004e FFF7FEFF 		bl	HAL_GPIO_Init
 915              	.LVL60:
 290:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     HAL_NVIC_EnableIRQ((IRQn_Type)(BUTTON_IRQn[Button]));
 916              		.loc 1 290 0
 917 0052 0022     		movs	r2, #0
 918 0054 0F21     		movs	r1, #15
 919 0056 2820     		movs	r0, #40
 920 0058 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 921              	.LVL61:
 291:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 922              		.loc 1 291 0
 923 005c 2820     		movs	r0, #40
 924 005e FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 925              	.LVL62:
 926              	.L72:
 293:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 927              		.loc 1 293 0
 928 0062 07B0     		add	sp, sp, #28
 929              	.LCFI27:
 930              		.cfi_def_cfa_offset 12
 931              		@ sp needed
 932 0064 30BD     		pop	{r4, r5, pc}
 933              	.L78:
 934 0066 00BF     		.align	2
 935              	.L77:
 936 0068 00100240 		.word	1073876992
 937 006c 00000000 		.word	.LANCHOR4
 938 0070 00002110 		.word	270598144
 939              		.cfi_endproc
 940              	.LFE70:
 942              		.section	.text.BSP_PB_DeInit,"ax",%progbits
 943              		.align	2
 944              		.global	BSP_PB_DeInit
 945              		.thumb
 946              		.thumb_func
 948              	BSP_PB_DeInit:
 949              	.LFB71:
ARM GAS  /tmp/ccOL19yU.s 			page 32


 302:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef gpio_init_structure;
 950              		.loc 1 302 0
 951              		.cfi_startproc
 952              		@ args = 0, pretend = 0, frame = 0
 953              		@ frame_needed = 0, uses_anonymous_args = 0
 954              	.LVL63:
 955 0000 10B5     		push	{r4, lr}
 956              	.LCFI28:
 957              		.cfi_def_cfa_offset 8
 958              		.cfi_offset 4, -8
 959              		.cfi_offset 14, -4
 960 0002 0446     		mov	r4, r0
 306:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_DeInit(BUTTON_PORT[Button], gpio_init_structure.Pin);
 961              		.loc 1 306 0
 962 0004 2820     		movs	r0, #40
 963              	.LVL64:
 964 0006 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 965              	.LVL65:
 307:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 966              		.loc 1 307 0
 967 000a 4FF40051 		mov	r1, #8192
 968 000e 034B     		ldr	r3, .L81
 969 0010 53F82400 		ldr	r0, [r3, r4, lsl #2]
 970 0014 FFF7FEFF 		bl	HAL_GPIO_DeInit
 971              	.LVL66:
 972 0018 10BD     		pop	{r4, pc}
 973              	.L82:
 974 001a 00BF     		.align	2
 975              	.L81:
 976 001c 00000000 		.word	.LANCHOR4
 977              		.cfi_endproc
 978              	.LFE71:
 980              		.section	.text.BSP_PB_GetState,"ax",%progbits
 981              		.align	2
 982              		.global	BSP_PB_GetState
 983              		.thumb
 984              		.thumb_func
 986              	BSP_PB_GetState:
 987              	.LFB72:
 317:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   return HAL_GPIO_ReadPin(BUTTON_PORT[Button], BUTTON_PIN[Button]);
 988              		.loc 1 317 0
 989              		.cfi_startproc
 990              		@ args = 0, pretend = 0, frame = 0
 991              		@ frame_needed = 0, uses_anonymous_args = 0
 992              	.LVL67:
 993 0000 08B5     		push	{r3, lr}
 994              	.LCFI29:
 995              		.cfi_def_cfa_offset 8
 996              		.cfi_offset 3, -8
 997              		.cfi_offset 14, -4
 318:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 998              		.loc 1 318 0
 999 0002 4FF40051 		mov	r1, #8192
 1000 0006 034B     		ldr	r3, .L85
 1001 0008 53F82000 		ldr	r0, [r3, r0, lsl #2]
 1002              	.LVL68:
 1003 000c FFF7FEFF 		bl	HAL_GPIO_ReadPin
ARM GAS  /tmp/ccOL19yU.s 			page 33


 1004              	.LVL69:
 319:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 1005              		.loc 1 319 0
 1006 0010 08BD     		pop	{r3, pc}
 1007              	.L86:
 1008 0012 00BF     		.align	2
 1009              	.L85:
 1010 0014 00000000 		.word	.LANCHOR4
 1011              		.cfi_endproc
 1012              	.LFE72:
 1014              		.section	.text.SD_IO_CSState,"ax",%progbits
 1015              		.align	2
 1016              		.global	SD_IO_CSState
 1017              		.thumb
 1018              		.thumb_func
 1020              	SD_IO_CSState:
 1021              	.LFB80:
 521:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if(val == 1) 
 1022              		.loc 1 521 0
 1023              		.cfi_startproc
 1024              		@ args = 0, pretend = 0, frame = 0
 1025              		@ frame_needed = 0, uses_anonymous_args = 0
 1026              	.LVL70:
 1027 0000 08B5     		push	{r3, lr}
 1028              	.LCFI30:
 1029              		.cfi_def_cfa_offset 8
 1030              		.cfi_offset 3, -8
 1031              		.cfi_offset 14, -4
 522:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 1032              		.loc 1 522 0
 1033 0002 0128     		cmp	r0, #1
 1034 0004 05D1     		bne	.L88
 524:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 1035              		.loc 1 524 0
 1036 0006 0122     		movs	r2, #1
 1037 0008 2021     		movs	r1, #32
 1038 000a 0548     		ldr	r0, .L91
 1039              	.LVL71:
 1040 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1041              	.LVL72:
 1042 0010 08BD     		pop	{r3, pc}
 1043              	.LVL73:
 1044              	.L88:
 528:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 1045              		.loc 1 528 0
 1046 0012 0022     		movs	r2, #0
 1047 0014 2021     		movs	r1, #32
 1048 0016 0248     		ldr	r0, .L91
 1049              	.LVL74:
 1050 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1051              	.LVL75:
 1052 001c 08BD     		pop	{r3, pc}
 1053              	.L92:
 1054 001e 00BF     		.align	2
 1055              	.L91:
 1056 0020 000C0140 		.word	1073810432
 1057              		.cfi_endproc
ARM GAS  /tmp/ccOL19yU.s 			page 34


 1058              	.LFE80:
 1060              		.section	.text.SD_IO_WriteReadData,"ax",%progbits
 1061              		.align	2
 1062              		.global	SD_IO_WriteReadData
 1063              		.thumb
 1064              		.thumb_func
 1066              	SD_IO_WriteReadData:
 1067              	.LFB81:
 539:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Send the byte */
 1068              		.loc 1 539 0
 1069              		.cfi_startproc
 1070              		@ args = 0, pretend = 0, frame = 0
 1071              		@ frame_needed = 0, uses_anonymous_args = 0
 1072              	.LVL76:
 1073 0000 08B5     		push	{r3, lr}
 1074              	.LCFI31:
 1075              		.cfi_def_cfa_offset 8
 1076              		.cfi_offset 3, -8
 1077              		.cfi_offset 14, -4
 541:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 1078              		.loc 1 541 0
 1079 0002 FFF7FEFF 		bl	SPIx_WriteReadData
 1080              	.LVL77:
 1081 0006 08BD     		pop	{r3, pc}
 1082              		.cfi_endproc
 1083              	.LFE81:
 1085              		.section	.text.SD_IO_WriteByte,"ax",%progbits
 1086              		.align	2
 1087              		.global	SD_IO_WriteByte
 1088              		.thumb
 1089              		.thumb_func
 1091              	SD_IO_WriteByte:
 1092              	.LFB82:
 550:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   uint8_t tmp;
 1093              		.loc 1 550 0
 1094              		.cfi_startproc
 1095              		@ args = 0, pretend = 0, frame = 16
 1096              		@ frame_needed = 0, uses_anonymous_args = 0
 1097              	.LVL78:
 1098 0000 00B5     		push	{lr}
 1099              	.LCFI32:
 1100              		.cfi_def_cfa_offset 4
 1101              		.cfi_offset 14, -4
 1102 0002 85B0     		sub	sp, sp, #20
 1103              	.LCFI33:
 1104              		.cfi_def_cfa_offset 24
 1105 0004 8DF80700 		strb	r0, [sp, #7]
 554:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   return tmp;
 1106              		.loc 1 554 0
 1107 0008 0122     		movs	r2, #1
 1108 000a 0DF10F01 		add	r1, sp, #15
 1109 000e 0DF10700 		add	r0, sp, #7
 1110              	.LVL79:
 1111 0012 FFF7FEFF 		bl	SPIx_WriteReadData
 1112              	.LVL80:
 556:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1113              		.loc 1 556 0
ARM GAS  /tmp/ccOL19yU.s 			page 35


 1114 0016 9DF80F00 		ldrb	r0, [sp, #15]	@ zero_extendqisi2
 1115 001a 05B0     		add	sp, sp, #20
 1116              	.LCFI34:
 1117              		.cfi_def_cfa_offset 4
 1118              		@ sp needed
 1119 001c 5DF804FB 		ldr	pc, [sp], #4
 1120              		.cfi_endproc
 1121              	.LFE82:
 1123              		.section	.text.SD_IO_Init,"ax",%progbits
 1124              		.align	2
 1125              		.global	SD_IO_Init
 1126              		.thumb
 1127              		.thumb_func
 1129              	SD_IO_Init:
 1130              	.LFB79:
 479:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpioinitstruct = {0};
 1131              		.loc 1 479 0
 1132              		.cfi_startproc
 1133              		@ args = 0, pretend = 0, frame = 24
 1134              		@ frame_needed = 0, uses_anonymous_args = 0
 1135 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1136              	.LCFI35:
 1137              		.cfi_def_cfa_offset 28
 1138              		.cfi_offset 4, -28
 1139              		.cfi_offset 5, -24
 1140              		.cfi_offset 6, -20
 1141              		.cfi_offset 7, -16
 1142              		.cfi_offset 8, -12
 1143              		.cfi_offset 9, -8
 1144              		.cfi_offset 14, -4
 1145 0004 87B0     		sub	sp, sp, #28
 1146              	.LCFI36:
 1147              		.cfi_def_cfa_offset 56
 480:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   uint8_t counter = 0;
 1148              		.loc 1 480 0
 1149 0006 0024     		movs	r4, #0
 1150 0008 0294     		str	r4, [sp, #8]
 1151 000a 0394     		str	r4, [sp, #12]
 1152 000c 0494     		str	r4, [sp, #16]
 1153 000e 0594     		str	r4, [sp, #20]
 1154              	.LVL81:
 1155              	.LBB9:
 484:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1156              		.loc 1 484 0
 1157 0010 1D4B     		ldr	r3, .L101
 1158 0012 9A69     		ldr	r2, [r3, #24]
 1159 0014 42F00802 		orr	r2, r2, #8
 1160 0018 9A61     		str	r2, [r3, #24]
 1161 001a 9B69     		ldr	r3, [r3, #24]
 1162 001c 03F00803 		and	r3, r3, #8
 1163 0020 0193     		str	r3, [sp, #4]
 1164 0022 019B     		ldr	r3, [sp, #4]
 1165              	.LBE9:
 487:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode   = GPIO_MODE_OUTPUT_PP;
 1166              		.loc 1 487 0
 1167 0024 2027     		movs	r7, #32
 1168 0026 0297     		str	r7, [sp, #8]
ARM GAS  /tmp/ccOL19yU.s 			page 36


 488:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pull   = GPIO_PULLUP;
 1169              		.loc 1 488 0
 1170 0028 0125     		movs	r5, #1
 1171 002a 0395     		str	r5, [sp, #12]
 489:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed  = GPIO_SPEED_FREQ_HIGH;
 1172              		.loc 1 489 0
 1173 002c 0495     		str	r5, [sp, #16]
 490:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(SD_CS_GPIO_PORT, &gpioinitstruct);
 1174              		.loc 1 490 0
 1175 002e 4FF00309 		mov	r9, #3
 1176 0032 CDF81490 		str	r9, [sp, #20]
 491:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1177              		.loc 1 491 0
 1178 0036 154E     		ldr	r6, .L101+4
 1179 0038 02A9     		add	r1, sp, #8
 1180 003a 3046     		mov	r0, r6
 1181 003c FFF7FEFF 		bl	HAL_GPIO_Init
 1182              	.LVL82:
 494:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode  = GPIO_MODE_OUTPUT_PP;
 1183              		.loc 1 494 0
 1184 0040 4FF04008 		mov	r8, #64
 1185 0044 CDF80880 		str	r8, [sp, #8]
 495:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Pull  = GPIO_NOPULL;
 1186              		.loc 1 495 0
 1187 0048 0395     		str	r5, [sp, #12]
 496:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed = GPIO_SPEED_FREQ_HIGH;
 1188              		.loc 1 496 0
 1189 004a 0494     		str	r4, [sp, #16]
 497:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(SD_CS_GPIO_PORT, &gpioinitstruct);
 1190              		.loc 1 497 0
 1191 004c CDF81490 		str	r9, [sp, #20]
 498:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_CS_HIGH();
 1192              		.loc 1 498 0
 1193 0050 02A9     		add	r1, sp, #8
 1194 0052 3046     		mov	r0, r6
 1195 0054 FFF7FEFF 		bl	HAL_GPIO_Init
 1196              	.LVL83:
 499:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /*------------Put SD in SPI mode--------------*/
 1197              		.loc 1 499 0
 1198 0058 2A46     		mov	r2, r5
 1199 005a 4146     		mov	r1, r8
 1200 005c 3046     		mov	r0, r6
 1201 005e FFF7FEFF 		bl	HAL_GPIO_WritePin
 1202              	.LVL84:
 502:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1203              		.loc 1 502 0
 1204 0062 FFF7FEFF 		bl	SPIx_Init
 1205              	.LVL85:
 505:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 1206              		.loc 1 505 0
 1207 0066 2A46     		mov	r2, r5
 1208 0068 3946     		mov	r1, r7
 1209 006a 3046     		mov	r0, r6
 1210 006c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1211              	.LVL86:
 509:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 1212              		.loc 1 509 0
ARM GAS  /tmp/ccOL19yU.s 			page 37


 1213 0070 04E0     		b	.L98
 1214              	.LVL87:
 1215              	.L99:
 512:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 1216              		.loc 1 512 0 discriminator 3
 1217 0072 FF20     		movs	r0, #255
 1218 0074 FFF7FEFF 		bl	SD_IO_WriteByte
 1219              	.LVL88:
 509:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 1220              		.loc 1 509 0 discriminator 3
 1221 0078 0134     		adds	r4, r4, #1
 1222              	.LVL89:
 1223 007a E4B2     		uxtb	r4, r4
 1224              	.LVL90:
 1225              	.L98:
 509:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 1226              		.loc 1 509 0 is_stmt 0 discriminator 1
 1227 007c 092C     		cmp	r4, #9
 1228 007e F8D9     		bls	.L99
 514:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1229              		.loc 1 514 0 is_stmt 1
 1230 0080 07B0     		add	sp, sp, #28
 1231              	.LCFI37:
 1232              		.cfi_def_cfa_offset 28
 1233              		@ sp needed
 1234 0082 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 1235              	.LVL91:
 1236              	.L102:
 1237 0086 00BF     		.align	2
 1238              	.L101:
 1239 0088 00100240 		.word	1073876992
 1240 008c 000C0140 		.word	1073810432
 1241              		.cfi_endproc
 1242              	.LFE79:
 1244              		.section	.text.SD_IO_ReadData,"ax",%progbits
 1245              		.align	2
 1246              		.global	SD_IO_ReadData
 1247              		.thumb
 1248              		.thumb_func
 1250              	SD_IO_ReadData:
 1251              	.LFB83:
 564:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Send the byte */
 1252              		.loc 1 564 0
 1253              		.cfi_startproc
 1254              		@ args = 0, pretend = 0, frame = 0
 1255              		@ frame_needed = 0, uses_anonymous_args = 0
 1256              	.LVL92:
 1257 0000 08B5     		push	{r3, lr}
 1258              	.LCFI38:
 1259              		.cfi_def_cfa_offset 8
 1260              		.cfi_offset 3, -8
 1261              		.cfi_offset 14, -4
 566:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }   
 1262              		.loc 1 566 0
 1263 0002 0A46     		mov	r2, r1
 1264 0004 0146     		mov	r1, r0
 1265              	.LVL93:
ARM GAS  /tmp/ccOL19yU.s 			page 38


 1266 0006 FFF7FEFF 		bl	SD_IO_WriteReadData
 1267              	.LVL94:
 1268 000a 08BD     		pop	{r3, pc}
 1269              		.cfi_endproc
 1270              	.LFE83:
 1272              		.section	.text.SD_IO_WriteData,"ax",%progbits
 1273              		.align	2
 1274              		.global	SD_IO_WriteData
 1275              		.thumb
 1276              		.thumb_func
 1278              	SD_IO_WriteData:
 1279              	.LFB84:
 575:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Send the byte */
 1280              		.loc 1 575 0
 1281              		.cfi_startproc
 1282              		@ args = 0, pretend = 0, frame = 0
 1283              		@ frame_needed = 0, uses_anonymous_args = 0
 1284              	.LVL95:
 1285 0000 08B5     		push	{r3, lr}
 1286              	.LCFI39:
 1287              		.cfi_def_cfa_offset 8
 1288              		.cfi_offset 3, -8
 1289              		.cfi_offset 14, -4
 577:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 1290              		.loc 1 577 0
 1291 0002 FFF7FEFF 		bl	SPIx_WriteData
 1292              	.LVL96:
 1293 0006 08BD     		pop	{r3, pc}
 1294              		.cfi_endproc
 1295              	.LFE84:
 1297              		.section	.text.LCD_IO_Init,"ax",%progbits
 1298              		.align	2
 1299              		.global	LCD_IO_Init
 1300              		.thumb
 1301              		.thumb_func
 1303              	LCD_IO_Init:
 1304              	.LFB85:
 585:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   GPIO_InitTypeDef  gpioinitstruct;
 1305              		.loc 1 585 0
 1306              		.cfi_startproc
 1307              		@ args = 0, pretend = 0, frame = 24
 1308              		@ frame_needed = 0, uses_anonymous_args = 0
 1309 0000 70B5     		push	{r4, r5, r6, lr}
 1310              	.LCFI40:
 1311              		.cfi_def_cfa_offset 16
 1312              		.cfi_offset 4, -16
 1313              		.cfi_offset 5, -12
 1314              		.cfi_offset 6, -8
 1315              		.cfi_offset 14, -4
 1316 0002 86B0     		sub	sp, sp, #24
 1317              	.LCFI41:
 1318              		.cfi_def_cfa_offset 40
 1319              	.LBB10:
 589:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   LCD_DC_GPIO_CLK_ENABLE();
 1320              		.loc 1 589 0
 1321 0004 164B     		ldr	r3, .L109
 1322 0006 9A69     		ldr	r2, [r3, #24]
ARM GAS  /tmp/ccOL19yU.s 			page 39


 1323 0008 42F00802 		orr	r2, r2, #8
 1324 000c 9A61     		str	r2, [r3, #24]
 1325 000e 9A69     		ldr	r2, [r3, #24]
 1326 0010 02F00802 		and	r2, r2, #8
 1327 0014 0092     		str	r2, [sp]
 1328 0016 009A     		ldr	r2, [sp]
 1329              	.LBE10:
 1330              	.LBB11:
 590:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 1331              		.loc 1 590 0
 1332 0018 9A69     		ldr	r2, [r3, #24]
 1333 001a 42F00402 		orr	r2, r2, #4
 1334 001e 9A61     		str	r2, [r3, #24]
 1335 0020 9B69     		ldr	r3, [r3, #24]
 1336 0022 03F00403 		and	r3, r3, #4
 1337 0026 0193     		str	r3, [sp, #4]
 1338 0028 019B     		ldr	r3, [sp, #4]
 1339              	.LBE11:
 593:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Mode   = GPIO_MODE_OUTPUT_PP;
 1340              		.loc 1 593 0
 1341 002a 4025     		movs	r5, #64
 1342 002c 0295     		str	r5, [sp, #8]
 594:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   gpioinitstruct.Speed  = GPIO_SPEED_FREQ_HIGH;
 1343              		.loc 1 594 0
 1344 002e 0126     		movs	r6, #1
 1345 0030 0396     		str	r6, [sp, #12]
 595:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(SD_CS_GPIO_PORT, &gpioinitstruct);
 1346              		.loc 1 595 0
 1347 0032 0323     		movs	r3, #3
 1348 0034 0593     		str	r3, [sp, #20]
 596:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       
 1349              		.loc 1 596 0
 1350 0036 0B4C     		ldr	r4, .L109+4
 1351 0038 02A9     		add	r1, sp, #8
 1352 003a 2046     		mov	r0, r4
 1353 003c FFF7FEFF 		bl	HAL_GPIO_Init
 1354              	.LVL97:
 599:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_GPIO_Init(LCD_DC_GPIO_PORT, &gpioinitstruct);
 1355              		.loc 1 599 0
 1356 0040 4FF40073 		mov	r3, #512
 1357 0044 0293     		str	r3, [sp, #8]
 600:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1358              		.loc 1 600 0
 1359 0046 02A9     		add	r1, sp, #8
 1360 0048 0748     		ldr	r0, .L109+8
 1361 004a FFF7FEFF 		bl	HAL_GPIO_Init
 1362              	.LVL98:
 603:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 1363              		.loc 1 603 0
 1364 004e 3246     		mov	r2, r6
 1365 0050 2946     		mov	r1, r5
 1366 0052 2046     		mov	r0, r4
 1367 0054 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1368              	.LVL99:
 606:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 1369              		.loc 1 606 0
 1370 0058 FFF7FEFF 		bl	SPIx_Init
ARM GAS  /tmp/ccOL19yU.s 			page 40


 1371              	.LVL100:
 607:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1372              		.loc 1 607 0
 1373 005c 06B0     		add	sp, sp, #24
 1374              	.LCFI42:
 1375              		.cfi_def_cfa_offset 16
 1376              		@ sp needed
 1377 005e 70BD     		pop	{r4, r5, r6, pc}
 1378              	.L110:
 1379              		.align	2
 1380              	.L109:
 1381 0060 00100240 		.word	1073876992
 1382 0064 000C0140 		.word	1073810432
 1383 0068 00080140 		.word	1073809408
 1384              		.cfi_endproc
 1385              	.LFE85:
 1387              		.section	.text.LCD_IO_WriteReg,"ax",%progbits
 1388              		.align	2
 1389              		.global	LCD_IO_WriteReg
 1390              		.thumb
 1391              		.thumb_func
 1393              	LCD_IO_WriteReg:
 1394              	.LFB86:
 615:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Reset LCD control line CS */
 1395              		.loc 1 615 0
 1396              		.cfi_startproc
 1397              		@ args = 0, pretend = 0, frame = 0
 1398              		@ frame_needed = 0, uses_anonymous_args = 0
 1399              	.LVL101:
 1400 0000 38B5     		push	{r3, r4, r5, lr}
 1401              	.LCFI43:
 1402              		.cfi_def_cfa_offset 16
 1403              		.cfi_offset 3, -16
 1404              		.cfi_offset 4, -12
 1405              		.cfi_offset 5, -8
 1406              		.cfi_offset 14, -4
 1407 0002 0546     		mov	r5, r0
 617:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 1408              		.loc 1 617 0
 1409 0004 0A4C     		ldr	r4, .L113
 1410 0006 0022     		movs	r2, #0
 1411 0008 4021     		movs	r1, #64
 1412 000a 2046     		mov	r0, r4
 1413              	.LVL102:
 1414 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1415              	.LVL103:
 620:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     
 1416              		.loc 1 620 0
 1417 0010 0022     		movs	r2, #0
 1418 0012 4FF40071 		mov	r1, #512
 1419 0016 0748     		ldr	r0, .L113+4
 1420 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1421              	.LVL104:
 623:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 1422              		.loc 1 623 0
 1423 001c 2846     		mov	r0, r5
 1424 001e FFF7FEFF 		bl	SPIx_Write
ARM GAS  /tmp/ccOL19yU.s 			page 41


 1425              	.LVL105:
 626:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 1426              		.loc 1 626 0
 1427 0022 0122     		movs	r2, #1
 1428 0024 4021     		movs	r1, #64
 1429 0026 2046     		mov	r0, r4
 1430 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1431              	.LVL106:
 1432 002c 38BD     		pop	{r3, r4, r5, pc}
 1433              	.L114:
 1434 002e 00BF     		.align	2
 1435              	.L113:
 1436 0030 000C0140 		.word	1073810432
 1437 0034 00080140 		.word	1073809408
 1438              		.cfi_endproc
 1439              	.LFE86:
 1441              		.section	.text.LCD_IO_WriteMultipleData,"ax",%progbits
 1442              		.align	2
 1443              		.global	LCD_IO_WriteMultipleData
 1444              		.thumb
 1445              		.thumb_func
 1447              	LCD_IO_WriteMultipleData:
 1448              	.LFB87:
 635:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   uint32_t counter = 0;
 1449              		.loc 1 635 0
 1450              		.cfi_startproc
 1451              		@ args = 0, pretend = 0, frame = 0
 1452              		@ frame_needed = 0, uses_anonymous_args = 0
 1453              	.LVL107:
 1454 0000 38B5     		push	{r3, r4, r5, lr}
 1455              	.LCFI44:
 1456              		.cfi_def_cfa_offset 16
 1457              		.cfi_offset 3, -16
 1458              		.cfi_offset 4, -12
 1459              		.cfi_offset 5, -8
 1460              		.cfi_offset 14, -4
 1461 0002 0546     		mov	r5, r0
 1462 0004 0C46     		mov	r4, r1
 1463              	.LVL108:
 639:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 1464              		.loc 1 639 0
 1465 0006 0022     		movs	r2, #0
 1466 0008 4021     		movs	r1, #64
 1467              	.LVL109:
 1468 000a 1648     		ldr	r0, .L122
 1469              	.LVL110:
 1470 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1471              	.LVL111:
 642:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1472              		.loc 1 642 0
 1473 0010 0122     		movs	r2, #1
 1474 0012 4FF40071 		mov	r1, #512
 1475 0016 1448     		ldr	r0, .L122+4
 1476 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1477              	.LVL112:
 644:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 1478              		.loc 1 644 0
ARM GAS  /tmp/ccOL19yU.s 			page 42


 1479 001c 012C     		cmp	r4, #1
 1480 001e 13D1     		bne	.L116
 648:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 1481              		.loc 1 648 0
 1482 0020 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 1483 0022 FFF7FEFF 		bl	SPIx_Write
 1484              	.LVL113:
 1485 0026 17E0     		b	.L117
 1486              	.LVL114:
 1487              	.L118:
 656:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 1488              		.loc 1 656 0 discriminator 1
 1489 0028 104B     		ldr	r3, .L122+8
 1490 002a 1B68     		ldr	r3, [r3]
 1491 002c 9A68     		ldr	r2, [r3, #8]
 1492 002e 12F0020F 		tst	r2, #2
 1493 0032 F9D0     		beq	.L118
 660:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1494              		.loc 1 660 0
 1495 0034 6A78     		ldrb	r2, [r5, #1]	@ zero_extendqisi2
 1496 0036 1A73     		strb	r2, [r3, #12]
 1497              	.L119:
 662:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 1498              		.loc 1 662 0 discriminator 1
 1499 0038 9A68     		ldr	r2, [r3, #8]
 1500 003a 12F0020F 		tst	r2, #2
 1501 003e FBD0     		beq	.L119
 665:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****       counter--;
 1502              		.loc 1 665 0 discriminator 2
 1503 0040 15F8022B 		ldrb	r2, [r5], #2	@ zero_extendqisi2
 1504              	.LVL115:
 1505 0044 1A73     		strb	r2, [r3, #12]
 1506              	.LVL116:
 654:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 1507              		.loc 1 654 0 discriminator 2
 1508 0046 023C     		subs	r4, r4, #2
 1509              	.LVL117:
 1510              	.L116:
 654:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 1511              		.loc 1 654 0 is_stmt 0 discriminator 1
 1512 0048 002C     		cmp	r4, #0
 1513 004a EDD1     		bne	.L118
 1514              	.L120:
 671:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 1515              		.loc 1 671 0 is_stmt 1 discriminator 1
 1516 004c 074B     		ldr	r3, .L122+8
 1517 004e 1B68     		ldr	r3, [r3]
 1518 0050 9B68     		ldr	r3, [r3, #8]
 1519 0052 13F0800F 		tst	r3, #128
 1520 0056 F9D1     		bne	.L120
 1521              	.LVL118:
 1522              	.L117:
 677:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 1523              		.loc 1 677 0
 1524 0058 0122     		movs	r2, #1
 1525 005a 4021     		movs	r1, #64
 1526 005c 0148     		ldr	r0, .L122
ARM GAS  /tmp/ccOL19yU.s 			page 43


 1527 005e FFF7FEFF 		bl	HAL_GPIO_WritePin
 1528              	.LVL119:
 1529 0062 38BD     		pop	{r3, r4, r5, pc}
 1530              	.LVL120:
 1531              	.L123:
 1532              		.align	2
 1533              	.L122:
 1534 0064 000C0140 		.word	1073810432
 1535 0068 00080140 		.word	1073809408
 1536 006c 00000000 		.word	.LANCHOR0
 1537              		.cfi_endproc
 1538              	.LFE87:
 1540              		.section	.text.LCD_Delay,"ax",%progbits
 1541              		.align	2
 1542              		.global	LCD_Delay
 1543              		.thumb
 1544              		.thumb_func
 1546              	LCD_Delay:
 1547              	.LFB88:
 686:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_Delay(Delay);
 1548              		.loc 1 686 0
 1549              		.cfi_startproc
 1550              		@ args = 0, pretend = 0, frame = 0
 1551              		@ frame_needed = 0, uses_anonymous_args = 0
 1552              	.LVL121:
 1553 0000 08B5     		push	{r3, lr}
 1554              	.LCFI45:
 1555              		.cfi_def_cfa_offset 8
 1556              		.cfi_offset 3, -8
 1557              		.cfi_offset 14, -4
 687:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 1558              		.loc 1 687 0
 1559 0002 FFF7FEFF 		bl	HAL_Delay
 1560              	.LVL122:
 1561 0006 08BD     		pop	{r3, pc}
 1562              		.cfi_endproc
 1563              	.LFE88:
 1565              		.section	.text.BSP_JOY_Init,"ax",%progbits
 1566              		.align	2
 1567              		.global	BSP_JOY_Init
 1568              		.thumb
 1569              		.thumb_func
 1571              	BSP_JOY_Init:
 1572              	.LFB93:
 784:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 785:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 786:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /******************************* LINK JOYSTICK ********************************/
 787:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 788:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 789:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Configures joystick available on adafruit 1.8" TFT shield 
 790:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *         managed through ADC to detect motion.
 791:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @retval Joystickstatus (0=> success, 1=> fail) 
 792:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 793:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** uint8_t BSP_JOY_Init(void)
 794:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 1573              		.loc 1 794 0
 1574              		.cfi_startproc
ARM GAS  /tmp/ccOL19yU.s 			page 44


 1575              		@ args = 0, pretend = 0, frame = 0
 1576              		@ frame_needed = 0, uses_anonymous_args = 0
 1577 0000 08B5     		push	{r3, lr}
 1578              	.LCFI46:
 1579              		.cfi_def_cfa_offset 8
 1580              		.cfi_offset 3, -8
 1581              		.cfi_offset 14, -4
 795:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if (ADCx_Init() != HAL_OK)
 1582              		.loc 1 795 0
 1583 0002 FFF7FEFF 		bl	ADCx_Init
 1584              	.LVL123:
 1585 0006 50B9     		cbnz	r0, .L128
 796:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 797:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     return (uint8_t) HAL_ERROR; 
 798:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 799:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 800:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Select Channel 8 to be converted */
 801:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   sConfig.Channel       = ADC_CHANNEL_8;
 1586              		.loc 1 801 0
 1587 0008 0649     		ldr	r1, .L130
 1588 000a 0823     		movs	r3, #8
 1589 000c 0B60     		str	r3, [r1]
 802:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   sConfig.SamplingTime  = ADC_SAMPLETIME_71CYCLES_5;
 1590              		.loc 1 802 0
 1591 000e 0623     		movs	r3, #6
 1592 0010 8B60     		str	r3, [r1, #8]
 803:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   sConfig.Rank          = 1;
 1593              		.loc 1 803 0
 1594 0012 0123     		movs	r3, #1
 1595 0014 4B60     		str	r3, [r1, #4]
 804:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 805:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Return Joystick initialization status */
 806:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   return (uint8_t)HAL_ADC_ConfigChannel(&hnucleo_Adc, &sConfig);
 1596              		.loc 1 806 0
 1597 0016 0448     		ldr	r0, .L130+4
 1598 0018 FFF7FEFF 		bl	HAL_ADC_ConfigChannel
 1599              	.LVL124:
 1600 001c 08BD     		pop	{r3, pc}
 1601              	.L128:
 797:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 1602              		.loc 1 797 0
 1603 001e 0120     		movs	r0, #1
 807:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 1604              		.loc 1 807 0
 1605 0020 08BD     		pop	{r3, pc}
 1606              	.L131:
 1607 0022 00BF     		.align	2
 1608              	.L130:
 1609 0024 00000000 		.word	.LANCHOR5
 1610 0028 00000000 		.word	.LANCHOR2
 1611              		.cfi_endproc
 1612              	.LFE93:
 1614              		.section	.text.BSP_JOY_DeInit,"ax",%progbits
 1615              		.align	2
 1616              		.global	BSP_JOY_DeInit
 1617              		.thumb
 1618              		.thumb_func
ARM GAS  /tmp/ccOL19yU.s 			page 45


 1620              	BSP_JOY_DeInit:
 1621              	.LFB94:
 808:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 809:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 810:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  DeInit joystick GPIOs.
 811:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @note   JOY DeInit does not disable the Mfx, just set the Mfx pins in Off mode
 812:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 813:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** void BSP_JOY_DeInit(void)
 814:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 1622              		.loc 1 814 0
 1623              		.cfi_startproc
 1624              		@ args = 0, pretend = 0, frame = 0
 1625              		@ frame_needed = 0, uses_anonymous_args = 0
 1626 0000 08B5     		push	{r3, lr}
 1627              	.LCFI47:
 1628              		.cfi_def_cfa_offset 8
 1629              		.cfi_offset 3, -8
 1630              		.cfi_offset 14, -4
 815:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     ADCx_DeInit();
 1631              		.loc 1 815 0
 1632 0002 FFF7FEFF 		bl	ADCx_DeInit
 1633              	.LVL125:
 1634 0006 08BD     		pop	{r3, pc}
 1635              		.cfi_endproc
 1636              	.LFE94:
 1638              		.section	.text.BSP_JOY_GetState,"ax",%progbits
 1639              		.align	2
 1640              		.global	BSP_JOY_GetState
 1641              		.thumb
 1642              		.thumb_func
 1644              	BSP_JOY_GetState:
 1645              	.LFB95:
 816:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 817:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 818:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** /**
 819:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @brief  Returns the Joystick key pressed.
 820:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @note   To know which Joystick key is pressed we need to detect the voltage
 821:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *         level on each key output
 822:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *           - None  : 3.3 V / 4095
 823:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *           - SEL   : 1.055 V / 1308
 824:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *           - DOWN  : 0.71 V / 88
 825:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *           - LEFT  : 3.0 V / 3720 
 826:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *           - RIGHT : 0.595 V / 737
 827:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   *           - UP    : 1.65 V / 2046
 828:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   * @retval JOYState_TypeDef: Code of the Joystick key pressed.
 829:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   */
 830:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** JOYState_TypeDef BSP_JOY_GetState(void)
 831:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** {
 1646              		.loc 1 831 0
 1647              		.cfi_startproc
 1648              		@ args = 0, pretend = 0, frame = 0
 1649              		@ frame_needed = 0, uses_anonymous_args = 0
 1650 0000 10B5     		push	{r4, lr}
 1651              	.LCFI48:
 1652              		.cfi_def_cfa_offset 8
 1653              		.cfi_offset 4, -8
 1654              		.cfi_offset 14, -4
ARM GAS  /tmp/ccOL19yU.s 			page 46


 1655              	.LVL126:
 832:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   JOYState_TypeDef state = JOY_NONE;
 833:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   uint16_t  keyconvertedvalue = 0; 
 834:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 835:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****  /* Start the conversion process */
 836:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   HAL_ADC_Start(&hnucleo_Adc);
 1656              		.loc 1 836 0
 1657 0002 1C4C     		ldr	r4, .L144
 1658 0004 2046     		mov	r0, r4
 1659 0006 FFF7FEFF 		bl	HAL_ADC_Start
 1660              	.LVL127:
 837:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 838:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Wait for the end of conversion */
 839:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if (HAL_ADC_PollForConversion(&hnucleo_Adc, 10) != HAL_TIMEOUT)
 1661              		.loc 1 839 0
 1662 000a 0A21     		movs	r1, #10
 1663 000c 2046     		mov	r0, r4
 1664 000e FFF7FEFF 		bl	HAL_ADC_PollForConversion
 1665              	.LVL128:
 1666 0012 0328     		cmp	r0, #3
 1667 0014 04D0     		beq	.L137
 840:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 841:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     /* Get the converted value of regular channel */
 842:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     keyconvertedvalue = HAL_ADC_GetValue(&hnucleo_Adc);
 1668              		.loc 1 842 0
 1669 0016 2046     		mov	r0, r4
 1670 0018 FFF7FEFF 		bl	HAL_ADC_GetValue
 1671              	.LVL129:
 1672 001c 80B2     		uxth	r0, r0
 1673              	.LVL130:
 1674 001e 00E0     		b	.L135
 1675              	.LVL131:
 1676              	.L137:
 833:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** 
 1677              		.loc 1 833 0
 1678 0020 0020     		movs	r0, #0
 1679              	.LVL132:
 1680              	.L135:
 843:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 844:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 845:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   if((keyconvertedvalue > 1800) && (keyconvertedvalue < 2090))
 1681              		.loc 1 845 0
 1682 0022 A0F20973 		subw	r3, r0, #1801
 1683 0026 9BB2     		uxth	r3, r3
 1684 0028 B3F5907F 		cmp	r3, #288
 1685 002c 17D9     		bls	.L138
 846:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 847:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     state = JOY_UP;
 848:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 849:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   else if((keyconvertedvalue > 500) && (keyconvertedvalue < 780))
 1686              		.loc 1 849 0
 1687 002e A0F2F513 		subw	r3, r0, #501
 1688 0032 9BB2     		uxth	r3, r3
 1689 0034 B3F58B7F 		cmp	r3, #278
 1690 0038 13D9     		bls	.L139
 850:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 851:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     state = JOY_RIGHT;
ARM GAS  /tmp/ccOL19yU.s 			page 47


 852:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 853:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   else if((keyconvertedvalue > 1200) && (keyconvertedvalue < 1350))
 1691              		.loc 1 853 0
 1692 003a A0F2B143 		subw	r3, r0, #1201
 1693 003e 9BB2     		uxth	r3, r3
 1694 0040 942B     		cmp	r3, #148
 1695 0042 10D9     		bls	.L140
 854:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 855:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     state = JOY_SEL;
 856:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 857:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   else if((keyconvertedvalue > 10) && (keyconvertedvalue < 130))
 1696              		.loc 1 857 0
 1697 0044 A0F10B03 		sub	r3, r0, #11
 1698 0048 9BB2     		uxth	r3, r3
 1699 004a 762B     		cmp	r3, #118
 1700 004c 0DD9     		bls	.L141
 858:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 859:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     state = JOY_DOWN;
 860:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 861:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   else if((keyconvertedvalue > 3500) && (keyconvertedvalue < 3760))
 1701              		.loc 1 861 0
 1702 004e A0F6AD50 		subw	r0, r0, #3501
 1703              	.LVL133:
 1704 0052 80B2     		uxth	r0, r0
 1705 0054 B0F5817F 		cmp	r0, #258
 1706 0058 09D8     		bhi	.L142
 862:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 863:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     state = JOY_LEFT;
 1707              		.loc 1 863 0
 1708 005a 0320     		movs	r0, #3
 1709 005c 10BD     		pop	{r4, pc}
 1710              	.LVL134:
 1711              	.L138:
 847:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 1712              		.loc 1 847 0
 1713 005e 0520     		movs	r0, #5
 1714              	.LVL135:
 1715 0060 10BD     		pop	{r4, pc}
 1716              	.LVL136:
 1717              	.L139:
 851:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 1718              		.loc 1 851 0
 1719 0062 0420     		movs	r0, #4
 1720              	.LVL137:
 1721 0064 10BD     		pop	{r4, pc}
 1722              	.LVL138:
 1723              	.L140:
 855:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 1724              		.loc 1 855 0
 1725 0066 0120     		movs	r0, #1
 1726              	.LVL139:
 1727 0068 10BD     		pop	{r4, pc}
 1728              	.LVL140:
 1729              	.L141:
 859:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 1730              		.loc 1 859 0
 1731 006a 0220     		movs	r0, #2
ARM GAS  /tmp/ccOL19yU.s 			page 48


 1732              	.LVL141:
 1733 006c 10BD     		pop	{r4, pc}
 1734              	.L142:
 864:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 865:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   else
 866:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   {
 867:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****     state = JOY_NONE;
 1735              		.loc 1 867 0
 1736 006e 0020     		movs	r0, #0
 1737              	.LVL142:
 868:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   }
 869:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   
 870:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   /* Return the code of the Joystick key pressed*/
 871:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c ****   return state;
 872:./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.c **** }
 1738              		.loc 1 872 0
 1739 0070 10BD     		pop	{r4, pc}
 1740              	.L145:
 1741 0072 00BF     		.align	2
 1742              	.L144:
 1743 0074 00000000 		.word	.LANCHOR2
 1744              		.cfi_endproc
 1745              	.LFE95:
 1747              		.global	SpixTimeout
 1748              		.global	BUTTON_IRQn
 1749              		.global	BUTTON_PIN
 1750              		.global	BUTTON_PORT
 1751              		.global	LED_PIN
 1752              		.global	LED_PORT
 1753              		.section	.rodata.BUTTON_IRQn,"a",%progbits
 1754              		.align	2
 1757              	BUTTON_IRQn:
 1758 0000 28       		.byte	40
 1759              		.section	.bss.hnucleo_Spi,"aw",%nobits
 1760              		.align	2
 1761              		.set	.LANCHOR0,. + 0
 1764              	hnucleo_Spi:
 1765 0000 00000000 		.space	88
 1765      00000000 
 1765      00000000 
 1765      00000000 
 1765      00000000 
 1766              		.section	.rodata.BUTTON_PIN,"a",%progbits
 1767              		.align	2
 1770              	BUTTON_PIN:
 1771 0000 0020     		.short	8192
 1772              		.section	.bss.sConfig,"aw",%nobits
 1773              		.align	2
 1774              		.set	.LANCHOR5,. + 0
 1777              	sConfig:
 1778 0000 00000000 		.space	12
 1778      00000000 
 1778      00000000 
 1779              		.section	.data.SpixTimeout,"aw",%progbits
 1780              		.align	2
 1781              		.set	.LANCHOR1,. + 0
 1784              	SpixTimeout:
ARM GAS  /tmp/ccOL19yU.s 			page 49


 1785 0000 E8030000 		.word	1000
 1786              		.section	.bss.hnucleo_Adc,"aw",%nobits
 1787              		.align	2
 1788              		.set	.LANCHOR2,. + 0
 1791              	hnucleo_Adc:
 1792 0000 00000000 		.space	48
 1792      00000000 
 1792      00000000 
 1792      00000000 
 1792      00000000 
 1793              		.section	.data.BUTTON_PORT,"aw",%progbits
 1794              		.align	2
 1795              		.set	.LANCHOR4,. + 0
 1798              	BUTTON_PORT:
 1799 0000 00100140 		.word	1073811456
 1800              		.section	.rodata.LED_PIN,"a",%progbits
 1801              		.align	2
 1804              	LED_PIN:
 1805 0000 2000     		.short	32
 1806              		.section	.data.LED_PORT,"aw",%progbits
 1807              		.align	2
 1808              		.set	.LANCHOR3,. + 0
 1811              	LED_PORT:
 1812 0000 00080140 		.word	1073809408
 1813              		.text
 1814              	.Letext0:
 1815              		.file 2 "Drivers/CMSIS/Device/Inc/stm32f103xb.h"
 1816              		.file 3 "/opt/toolchain/gcc-arm-none-eabi-5_4-2016q3/arm-none-eabi/include/machine/_default_types.
 1817              		.file 4 "/opt/toolchain/gcc-arm-none-eabi-5_4-2016q3/arm-none-eabi/include/sys/_stdint.h"
 1818              		.file 5 "Drivers/CMSIS/Device/Inc/stm32f1xx.h"
 1819              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 1820              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 1821              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 1822              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_adc.h"
 1823              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 1824              		.file 11 "./Drivers/BSP/STM32F1xx_Nucleo/stm32f1xx_nucleo.h"
 1825              		.file 12 "Drivers/CMSIS/Inc/core_cm3.h"
 1826              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_adc_ex.h"
 1827              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_cortex.h"
 1828              		.file 15 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
ARM GAS  /tmp/ccOL19yU.s 			page 50


DEFINED SYMBOLS
                            *ABS*:00000000 stm32f1xx_nucleo.c
     /tmp/ccOL19yU.s:20     .text.SPIx_MspInit:00000000 $t
     /tmp/ccOL19yU.s:24     .text.SPIx_MspInit:00000000 SPIx_MspInit
     /tmp/ccOL19yU.s:120    .text.SPIx_MspInit:0000007c $d
     /tmp/ccOL19yU.s:126    .text.ADCx_MspInit:00000000 $t
     /tmp/ccOL19yU.s:130    .text.ADCx_MspInit:00000000 ADCx_MspInit
     /tmp/ccOL19yU.s:192    .text.ADCx_MspInit:00000044 $d
     /tmp/ccOL19yU.s:198    .text.ADCx_MspDeInit:00000000 $t
     /tmp/ccOL19yU.s:202    .text.ADCx_MspDeInit:00000000 ADCx_MspDeInit
     /tmp/ccOL19yU.s:229    .text.ADCx_MspDeInit:00000018 $d
     /tmp/ccOL19yU.s:235    .text.SPIx_Init:00000000 $t
     /tmp/ccOL19yU.s:239    .text.SPIx_Init:00000000 SPIx_Init
     /tmp/ccOL19yU.s:298    .text.SPIx_Init:00000040 $d
     /tmp/ccOL19yU.s:304    .text.SPIx_Error:00000000 $t
     /tmp/ccOL19yU.s:308    .text.SPIx_Error:00000000 SPIx_Error
     /tmp/ccOL19yU.s:330    .text.SPIx_Error:00000010 $d
     /tmp/ccOL19yU.s:335    .text.SPIx_WriteReadData:00000000 $t
     /tmp/ccOL19yU.s:339    .text.SPIx_WriteReadData:00000000 SPIx_WriteReadData
     /tmp/ccOL19yU.s:382    .text.SPIx_WriteReadData:00000024 $d
     /tmp/ccOL19yU.s:388    .text.SPIx_Write:00000000 $t
     /tmp/ccOL19yU.s:392    .text.SPIx_Write:00000000 SPIx_Write
     /tmp/ccOL19yU.s:435    .text.SPIx_Write:0000002c $d
     /tmp/ccOL19yU.s:441    .text.SPIx_WriteData:00000000 $t
     /tmp/ccOL19yU.s:445    .text.SPIx_WriteData:00000000 SPIx_WriteData
     /tmp/ccOL19yU.s:478    .text.SPIx_WriteData:00000018 $d
     /tmp/ccOL19yU.s:484    .text.ADCx_Init:00000000 $t
     /tmp/ccOL19yU.s:488    .text.ADCx_Init:00000000 ADCx_Init
     /tmp/ccOL19yU.s:557    .text.ADCx_Init:0000004c $d
     /tmp/ccOL19yU.s:563    .text.ADCx_DeInit:00000000 $t
     /tmp/ccOL19yU.s:567    .text.ADCx_DeInit:00000000 ADCx_DeInit
     /tmp/ccOL19yU.s:594    .text.ADCx_DeInit:00000018 $d
     /tmp/ccOL19yU.s:600    .text.BSP_GetVersion:00000000 $t
     /tmp/ccOL19yU.s:605    .text.BSP_GetVersion:00000000 BSP_GetVersion
     /tmp/ccOL19yU.s:618    .text.BSP_GetVersion:00000004 $d
     /tmp/ccOL19yU.s:623    .text.BSP_LED_Init:00000000 $t
     /tmp/ccOL19yU.s:628    .text.BSP_LED_Init:00000000 BSP_LED_Init
     /tmp/ccOL19yU.s:695    .text.BSP_LED_Init:00000048 $d
     /tmp/ccOL19yU.s:701    .text.BSP_LED_DeInit:00000000 $t
     /tmp/ccOL19yU.s:706    .text.BSP_LED_DeInit:00000000 BSP_LED_DeInit
     /tmp/ccOL19yU.s:738    .text.BSP_LED_DeInit:00000020 $d
     /tmp/ccOL19yU.s:743    .text.BSP_LED_On:00000000 $t
     /tmp/ccOL19yU.s:748    .text.BSP_LED_On:00000000 BSP_LED_On
     /tmp/ccOL19yU.s:772    .text.BSP_LED_On:00000014 $d
     /tmp/ccOL19yU.s:777    .text.BSP_LED_Off:00000000 $t
     /tmp/ccOL19yU.s:782    .text.BSP_LED_Off:00000000 BSP_LED_Off
     /tmp/ccOL19yU.s:806    .text.BSP_LED_Off:00000014 $d
     /tmp/ccOL19yU.s:811    .text.BSP_LED_Toggle:00000000 $t
     /tmp/ccOL19yU.s:816    .text.BSP_LED_Toggle:00000000 BSP_LED_Toggle
     /tmp/ccOL19yU.s:839    .text.BSP_LED_Toggle:00000010 $d
     /tmp/ccOL19yU.s:844    .text.BSP_PB_Init:00000000 $t
     /tmp/ccOL19yU.s:849    .text.BSP_PB_Init:00000000 BSP_PB_Init
     /tmp/ccOL19yU.s:936    .text.BSP_PB_Init:00000068 $d
     /tmp/ccOL19yU.s:943    .text.BSP_PB_DeInit:00000000 $t
     /tmp/ccOL19yU.s:948    .text.BSP_PB_DeInit:00000000 BSP_PB_DeInit
     /tmp/ccOL19yU.s:976    .text.BSP_PB_DeInit:0000001c $d
     /tmp/ccOL19yU.s:981    .text.BSP_PB_GetState:00000000 $t
ARM GAS  /tmp/ccOL19yU.s 			page 51


     /tmp/ccOL19yU.s:986    .text.BSP_PB_GetState:00000000 BSP_PB_GetState
     /tmp/ccOL19yU.s:1010   .text.BSP_PB_GetState:00000014 $d
     /tmp/ccOL19yU.s:1015   .text.SD_IO_CSState:00000000 $t
     /tmp/ccOL19yU.s:1020   .text.SD_IO_CSState:00000000 SD_IO_CSState
     /tmp/ccOL19yU.s:1056   .text.SD_IO_CSState:00000020 $d
     /tmp/ccOL19yU.s:1061   .text.SD_IO_WriteReadData:00000000 $t
     /tmp/ccOL19yU.s:1066   .text.SD_IO_WriteReadData:00000000 SD_IO_WriteReadData
     /tmp/ccOL19yU.s:1086   .text.SD_IO_WriteByte:00000000 $t
     /tmp/ccOL19yU.s:1091   .text.SD_IO_WriteByte:00000000 SD_IO_WriteByte
     /tmp/ccOL19yU.s:1124   .text.SD_IO_Init:00000000 $t
     /tmp/ccOL19yU.s:1129   .text.SD_IO_Init:00000000 SD_IO_Init
     /tmp/ccOL19yU.s:1239   .text.SD_IO_Init:00000088 $d
     /tmp/ccOL19yU.s:1245   .text.SD_IO_ReadData:00000000 $t
     /tmp/ccOL19yU.s:1250   .text.SD_IO_ReadData:00000000 SD_IO_ReadData
     /tmp/ccOL19yU.s:1273   .text.SD_IO_WriteData:00000000 $t
     /tmp/ccOL19yU.s:1278   .text.SD_IO_WriteData:00000000 SD_IO_WriteData
     /tmp/ccOL19yU.s:1298   .text.LCD_IO_Init:00000000 $t
     /tmp/ccOL19yU.s:1303   .text.LCD_IO_Init:00000000 LCD_IO_Init
     /tmp/ccOL19yU.s:1381   .text.LCD_IO_Init:00000060 $d
     /tmp/ccOL19yU.s:1388   .text.LCD_IO_WriteReg:00000000 $t
     /tmp/ccOL19yU.s:1393   .text.LCD_IO_WriteReg:00000000 LCD_IO_WriteReg
     /tmp/ccOL19yU.s:1436   .text.LCD_IO_WriteReg:00000030 $d
     /tmp/ccOL19yU.s:1442   .text.LCD_IO_WriteMultipleData:00000000 $t
     /tmp/ccOL19yU.s:1447   .text.LCD_IO_WriteMultipleData:00000000 LCD_IO_WriteMultipleData
     /tmp/ccOL19yU.s:1534   .text.LCD_IO_WriteMultipleData:00000064 $d
     /tmp/ccOL19yU.s:1541   .text.LCD_Delay:00000000 $t
     /tmp/ccOL19yU.s:1546   .text.LCD_Delay:00000000 LCD_Delay
     /tmp/ccOL19yU.s:1566   .text.BSP_JOY_Init:00000000 $t
     /tmp/ccOL19yU.s:1571   .text.BSP_JOY_Init:00000000 BSP_JOY_Init
     /tmp/ccOL19yU.s:1609   .text.BSP_JOY_Init:00000024 $d
     /tmp/ccOL19yU.s:1615   .text.BSP_JOY_DeInit:00000000 $t
     /tmp/ccOL19yU.s:1620   .text.BSP_JOY_DeInit:00000000 BSP_JOY_DeInit
     /tmp/ccOL19yU.s:1639   .text.BSP_JOY_GetState:00000000 $t
     /tmp/ccOL19yU.s:1644   .text.BSP_JOY_GetState:00000000 BSP_JOY_GetState
     /tmp/ccOL19yU.s:1743   .text.BSP_JOY_GetState:00000074 $d
     /tmp/ccOL19yU.s:1784   .data.SpixTimeout:00000000 SpixTimeout
     /tmp/ccOL19yU.s:1757   .rodata.BUTTON_IRQn:00000000 BUTTON_IRQn
     /tmp/ccOL19yU.s:1770   .rodata.BUTTON_PIN:00000000 BUTTON_PIN
     /tmp/ccOL19yU.s:1798   .data.BUTTON_PORT:00000000 BUTTON_PORT
     /tmp/ccOL19yU.s:1804   .rodata.LED_PIN:00000000 LED_PIN
     /tmp/ccOL19yU.s:1811   .data.LED_PORT:00000000 LED_PORT
     /tmp/ccOL19yU.s:1754   .rodata.BUTTON_IRQn:00000000 $d
     /tmp/ccOL19yU.s:1760   .bss.hnucleo_Spi:00000000 $d
     /tmp/ccOL19yU.s:1764   .bss.hnucleo_Spi:00000000 hnucleo_Spi
     /tmp/ccOL19yU.s:1767   .rodata.BUTTON_PIN:00000000 $d
     /tmp/ccOL19yU.s:1773   .bss.sConfig:00000000 $d
     /tmp/ccOL19yU.s:1777   .bss.sConfig:00000000 sConfig
     /tmp/ccOL19yU.s:1780   .data.SpixTimeout:00000000 $d
     /tmp/ccOL19yU.s:1787   .bss.hnucleo_Adc:00000000 $d
     /tmp/ccOL19yU.s:1791   .bss.hnucleo_Adc:00000000 hnucleo_Adc
     /tmp/ccOL19yU.s:1794   .data.BUTTON_PORT:00000000 $d
     /tmp/ccOL19yU.s:1801   .rodata.LED_PIN:00000000 $d
     /tmp/ccOL19yU.s:1807   .data.LED_PORT:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
HAL_GPIO_Init
ARM GAS  /tmp/ccOL19yU.s 			page 52


HAL_GPIO_DeInit
HAL_SPI_GetState
HAL_SPI_Init
HAL_SPI_DeInit
HAL_SPI_TransmitReceive
HAL_SPI_Transmit
HAL_ADC_GetState
HAL_ADC_Init
HAL_ADCEx_Calibration_Start
HAL_ADC_DeInit
HAL_GPIO_WritePin
HAL_GPIO_TogglePin
HAL_NVIC_SetPriority
HAL_NVIC_EnableIRQ
HAL_NVIC_DisableIRQ
HAL_GPIO_ReadPin
HAL_Delay
HAL_ADC_ConfigChannel
HAL_ADC_Start
HAL_ADC_PollForConversion
HAL_ADC_GetValue
